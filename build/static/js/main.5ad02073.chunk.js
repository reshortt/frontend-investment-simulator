(this["webpackJsonpinvestment-simulator"]=this["webpackJsonpinvestment-simulator"]||[]).push([[0],{197:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(55),c=n.n(s),o=(n(197),n(27)),i=n(188),u=n(282),l=n(185),b=n(177),j=n(76),p=n(18),d=n.n(p),f=n(40),h="AUTH_TOKEN_KEY",x=n(56),m=n.n(x),O="http://localhost:3005",v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=O+e,a=new URLSearchParams(t).toString();return n+"?"+a},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET";return{method:e,headers:{authorization:"Bearer ".concat(sessionStorage.getItem(h))}}},y=function(){return!!sessionStorage.getItem(h)},k=function(){var e=Object(f.a)(d.a.mark((function e(t,n,a){var r,s,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:t,password:n,name:a})},e.next=3,m()(v("/API/signup"),r);case 3:return s=e.sent,c=s.status,e.next=7,s.json();case 7:if(o=e.sent,200!==c){e.next=12;break}return e.abrupt("return",!0);case 12:return console.log("Signup failed: "+JSON.stringify(o)),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(d.a.mark((function e(t,n){var a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:t,password:n})},e.next=3,m()(v("/API/login"),a);case 3:r=e.sent,e.t0=r.status,e.next=200===e.t0?7:401===e.t0||400===e.t0?13:15;break;case 7:return e.next=9,r.json();case 9:return s=e.sent,sessionStorage.setItem(h,s.token),console.log("Successful login: "+s),e.abrupt("return",!0);case 13:return console.log("unsuccessful login for user "+t),e.abrupt("return",!1);case 15:return console.log("unexpected login response"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,m()(v("/API/getAccount"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",null);case 17:return console.log("unexpected getAccount response"),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,m()(v("/API/getUserInfo"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",null);case 17:return console.log("unexpected getUser response"),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,m()(v("/API/getAssets"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?12:18;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,console.log("Assets retrieved: "+a.assets),e.abrupt("return",a.assets);case 12:return e.t1=console,e.next=15,n.json();case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 18:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,m()(v("/API/getTransactions"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a.transactions);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 17:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,m()(v("/API/getCash"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a.cash);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 17:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Looking up ticker: "+t+"......."),n=g(),a=v("/API/lookupTicker",{tickerSymbol:t}),e.next=5,m()(a,n);case 5:r=e.sent,console.log("ticker lookup: ",r.status," - ",r.json),e.t0=r.status,e.next=200===e.t0?10:400===e.t0?14:15;break;case 10:return e.next=12,r.text();case 12:return s=e.sent,e.abrupt("return",s);case 14:return e.abrupt("return",null);case 15:return console.log("unexpected lookupTicker response"),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function T(e,t){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(d.a.mark((function e(t,n){var a,r,s,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(),r=v("/API/getHistoricalPrices",{ticker:t,date:n.toDateString()}),console.log("Getting  historical prices for ",t," with URL=",r),e.next=5,m()(r,a);case 5:s=e.sent,e.t0=s.status,e.next=200===e.t0?9:13;break;case 9:return e.next=11,s.json();case 11:return c=e.sent,e.abrupt("return",c);case 13:return console.log("unexpected buyAsset response"),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){var e=Object(f.a)(d.a.mark((function e(t,n,a){var r,s,c,o,i,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g(),s=n.toString(),c=a.toString(),o=v("/API/buyAsset",{tickerSymbol:t,shares:s,price:c}),e.next=6,m()(o,r);case 6:i=e.sent,e.t0=i.status,e.next=200===e.t0?10:15;break;case 10:return e.next=12,i.json();case 12:return u=e.sent,l=u.cash,e.abrupt("return",{successful:!0,remainingCash:l});case 15:return console.log("unexpected buyAsset response"),e.abrupt("return",{successful:!1,remainingCash:0});case 17:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(d.a.mark((function e(t,n,a){var r,s,c,o,i,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g(),s=n.toString(),c=a.toString(),o=v("/API/sellAsset",{tickerSymbol:t,shares:s,price:c}),e.next=6,m()(o,r);case 6:i=e.sent,console.log("response: ",i.status),e.t0=i.status,e.next=200===e.t0?11:16;break;case 11:return e.next=13,i.json();case 13:return u=e.sent,l=u.cash,e.abrupt("return",{successful:!0,remainingCash:l});case 16:return console.log("unexpected getAssets response"),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(),a=v("/API/getStockPrice",{tickerSymbol:t}),e.next=4,m()(a,n);case 4:return r=e.sent,e.next=7,r.json();case 7:s=e.sent,console.log("Get Stock Price Response:: ",s),e.t0=r.status,e.next=200===e.t0?12:401===e.t0?13:19;break;case 12:return e.abrupt("return",s);case 13:return e.t1=console,e.next=16,r.json();case 16:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",s);case 19:return console.log("unexpected getAssets response"),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=0;return e?(e.lots.map((function(e){t+=e.shares})),t):0},F=(n(150),n(5));var z=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(F.jsxs)(u.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(e){r(!0),w(e.username,e.password).then((function(e){r(!1),e?S().then((function(e){i.b.success("User "+(null===e||void 0===e?void 0:e.name)+" successfully logged in",1).then((function(){window.location.assign("/")}))})):i.b.error("Invalid credentials")}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(F.jsx)(u.a.Item,{label:"User name",name:"username",rules:[{required:!0,message:"Please input your username"}],children:Object(F.jsx)(l.a,{})}),Object(F.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(F.jsx)(l.a.Password,{})}),Object(F.jsx)(u.a.Item,{wrapperCol:{offset:8,span:16},children:n||y()?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)(j.a,{type:"primary",htmlType:"submit",children:"Login"})}),Object(F.jsxs)(u.a.Item,{wrapperCol:{offset:8,span:16},children:[Object(F.jsx)("label",{children:"No Account? "}),Object(F.jsx)(j.a,{type:"link",onClick:function(){window.location.assign("/signup")},children:"Sign Up"})]})]})},Y=n.p+"static/media/stocks.0f6444bc.png";function M(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){y()&&!n&&S().then((function(e){e&&r(e)}))})),Object(F.jsxs)("div",{style:{padding:"20px 10px 50px",fontSize:"16px",width:"100%",height:"60px",backgroundColor:"green"},children:[Object(F.jsx)("img",{src:Y,width:"24",height:"24",style:{verticalAlign:"middle"}}),Object(F.jsxs)("label",{style:{color:"white",font:"Arial",textAlign:"center",verticalAlign:"bottom",paddingLeft:"10px"},children:[n?" Investment Simulator - "+n.name:" Investment Simulator"," "]})]})}var V,R=n(280),G=n(17),q=n(58),H=n(191),J=n(281);!function(e){e.GIFT="GIFT",e.BUY="BUY",e.SELL="SELL",e.DIVIDEND="DIVIDEND",e.SPLIT="SPLIT"}(V||(V={}));var K=function(e){var t,n=0,a=Object(G.a)(e.lots);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=r.basis*r.shares}}catch(s){a.e(s)}finally{a.f()}return n},$=function(e){var t,n=0,a=Object(G.a)(e.lots);try{for(a.s();!(t=a.n()).done;){n+=t.value.shares}}catch(r){a.e(r)}finally{a.f()}return n},_=function(e){return $(e)*(e.stock.price.bid||e.stock.price.previousClose||0)},Q=function(e){return W(e)-1e6},W=function(e){var t,n=0,a=Object(G.a)(e.assets);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=_(r)}}catch(s){a.e(s)}finally{a.f()}return n+e.info.cash},X=function(e,t){return _(t)/W(e)},Z=function(e){return _(e)-K(e)},ee=function(e){return"$"+new Intl.NumberFormat("en-us",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},te=function(e){return new Intl.NumberFormat("en-us",{minimumFractionDigits:2,maximumFractionDigits:2}).format(100*e)+"%"},ne=function(e,t){var n=new Date(e);if(!Object(H.a)(n))return"";var a=t?"MMMM dd, yyyy":"yyyy-MM-dd";return Object(J.a)(n,a)};function ae(e,t){var n=[];t.setHours(0,0,0,0);var a,r=Object(G.a)(e);try{for(r.s();!(a=r.n()).done;){var s=a.value,c=new Date(s.date);if(c.setHours(0,0,0,0),c>t)break;c.getTime()===t.getTime()&&n.push(s)}}catch(o){r.e(o)}finally{r.f()}return n}function re(e,t){var n,a=e.shares,r=Object(G.a)(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.type===V.SPLIT&&s.symbol.toUpperCase()===e.symbol.toUpperCase()&&s.date>e.date&&(a*=s.to/s.from)}}catch(c){r.e(c)}finally{r.f()}return a}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(f.a)(d.a.mark((function e(t){var n,a,r,s,c,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new Map,a=[],r=0,s=new Date(t[0].date),(c=new Date(Date.now())).setDate(c.getDate()-1),o=function(e){var s,c=ae(t,e),o=Object(G.a)(c);try{for(o.s();!(s=o.n()).done;){var i=s.value;switch(i.type){case V.BUY:var u=n.get(i.symbol),l=re(i,t);void 0!==u?u+=l:u=l,n.set(i.symbol,u),r-=i.amount;break;case V.DIVIDEND:r+=i.amount;break;case V.SELL:var b=n.get(i.symbol),j=re(i,t);void 0!==b?b-=j:(console.log("******** Error - sold shares that were not owned"),b=0),n.set(i.symbol,b),r+=i.amount;break;case V.GIFT:r+=i.amount}}}catch(d){o.e(d)}finally{o.f()}var p=[];n.forEach((function(e,t){void 0!==e&&e>0&&p.push({shares:e,symbol:t})})),a.push({cash:r,date:new Date(e),positions:p})},i=s;i<c;i.setDate(i.getDate()+1))o(i);return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=new Map,ie=function(){var e=Object(f.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=oe.get(t))){e.next=3;break}return e.abrupt("return",a);case 3:return e.next=5,T(t,n);case 5:return a=e.sent,oe.set(t,a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(f.a)(d.a.mark((function e(t,n){var a,r,s,c,o,i,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t,n);case 2:if(a=e.sent,r=a.length>2?Math.abs(new Date(a[0].date).getTime()-new Date(n).getTime()):void 0,s=a.length>2?Math.abs(new Date(a[a.length-1].date).getTime()-new Date(n).getTime()):void 0,!(r&&s&&r>s)){e.next=17;break}c=a.length-1;case 7:if(!(c>=0)){e.next=15;break}if(o=a[c],!(new Date(o.date)<=n)){e.next=12;break}return e.abrupt("return",o.price);case 12:--c,e.next=7;break;case 15:e.next=35;break;case 17:i=Object(G.a)(a),e.prev=18,i.s();case 20:if((u=i.n()).done){e.next=27;break}if(l=u.value,!(new Date(l.date)>=n)){e.next=25;break}return e.abrupt("return",l.price);case 25:e.next=20;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(18),i.e(e.t0);case 32:return e.prev=32,i.f(),e.finish(32);case 35:return console.log(t,"price on ",n,": ",0),e.abrupt("return",0);case 37:case"end":return e.stop()}}),e,null,[[18,29,32,35]])})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,r,s,c,o,i,u,l,b,j,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,se(t);case 3:a=e.sent,r=Object(G.a)(a),e.prev=5,r.s();case 7:if((s=r.n()).done){e.next=37;break}c=s.value,o=0,i=new Date(c.date),u=[],l=Object(G.a)(c.positions),e.prev=13,l.s();case 15:if((b=l.n()).done){e.next=25;break}return j=b.value,e.next=19,ue(j.symbol,i);case 19:p=e.sent,f={symbol:j.symbol,value:j.shares*p},u.push(f),o+=f.value;case 23:e.next=15;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(13),l.e(e.t0);case 30:return e.prev=30,l.f(),e.finish(30);case 33:o+=c.cash,n.push({date:i,cash:c.cash,total:o,stocks:u});case 35:e.next=7;break;case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(5),r.e(e.t1);case 42:return e.prev=42,r.f(),e.finish(42);case 45:return oe.clear(),e.abrupt("return",n);case 47:case"end":return e.stop()}}),e,null,[[5,39,42,45],[13,27,30,33]])})));return function(t){return e.apply(this,arguments)}}(),be=function(e){return e.type===V.BUY?(e.amount-e.commission)/e.shares:(e.amount+e.commission)/e.shares},je=n(77),pe=n(189),de=n(59);de.c.register.apply(de.c,Object(q.a)(de.j));var fe=["cadetblue","darkorchid","cornflowerblue","indigo","olive","darkseagreen","darkmagenta"];var he=function(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){P().then((function(e){le(e).then((function(e){var t=s(e);r(t)}))}))}),[]);var s=function(e){var t=[],n=[],a=[],r=[];e=function(e){if(e.length<100)return e;for(var t=[],n=e.length/100,a=0;a<e.length;a+=n){var r=Math.floor(a);t.push(e[r])}return t[t.length-1]!=e[e.length-1]&&t.push(e[e.length-1]),t}(e);var s,c=new Map,o=Object(G.a)(e);try{for(o.s();!(s=o.n()).done;){var i,u=s.value,l=Object(G.a)(u.stocks);try{for(l.s();!(i=l.n()).done;){var b=i.value;c.get(b.symbol)||c.set(b.symbol,[])}}catch(x){l.e(x)}finally{l.f()}}}catch(x){o.e(x)}finally{o.f()}var j,p=Object(G.a)(e);try{var d=function(){var e=j.value;t.push(ne(e.date,!1)),a.push(e.total),r.push(e.cash),c.forEach((function(t,n){var a,r=NaN,s=Object(G.a)(e.stocks);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.symbol.toUpperCase()===n.toUpperCase()){r=c.value;break}}}catch(x){s.e(x)}finally{s.f()}t.push(r)}))};for(p.s();!(j=p.n()).done;)d()}catch(x){p.e(x)}finally{p.f()}n.push({id:1,label:"Total",data:a,pointRadius:3,pointHoverRadius:6,borderColor:"blue"}),n.push({id:2,label:"Cash",data:r,pointRadius:3,pointHoverRadius:6,borderColor:"green"});var f=3,h=0;return c.forEach((function(e,t){var a=fe[h];++h==fe.length&&(h=0),n.push({id:f++,label:t,data:e,pointRadius:3,pointHoverRadius:6,borderColor:a})})),{labels:t,datasets:n}};return Object(F.jsx)("div",{className:"Analysis",children:Object(F.jsx)("header",{className:"Analysis-header",children:void 0===n?Object(F.jsx)("div",{children:Object(F.jsx)(b.a,{size:"default"})}):n.labels.length<7?Object(F.jsx)(je.a,{description:"History unavailable for accounts created within the last week"}):Object(F.jsx)(pe.a,{datasetIdKey:"1",data:n})})})},xe=n(35);var me=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(),c=Object(o.a)(s,2),i=c[0],l=c[1],j=Object(a.useState)(!1),p=Object(o.a)(j,2),d=p[0],f=p[1],h=Object(a.useState)(!1),x=Object(o.a)(h,2),m=x[0],O=x[1];return Object(a.useEffect)((function(){O(!0),S().then((function(e){e&&l(e),O(!1),f(!0),I().then((function(e){e&&r(e),f(!1)}))}))}),[]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("br",{}),Object(F.jsxs)(u.a,Object(xe.a)(Object(xe.a)({name:"overview"},{labelCol:{span:2,offset:0},wrapperCol:{span:36,offset:1}}),{},{children:[Object(F.jsx)(u.a.Item,{label:"Name",labelAlign:"right",children:m||!i?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{children:i.name})}),Object(F.jsx)(u.a.Item,{label:"User ID",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:i&&!m&&i.userID?i.userID:Object(F.jsx)(b.a,{size:"small"})})}),Object(F.jsx)(u.a.Item,{label:"Account Created",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:i&&!m?ne(i.created,!0):Object(F.jsx)(b.a,{size:"small"})})}),Object(F.jsx)(u.a.Item,{label:"Account Value",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:!n||d?Object(F.jsx)(b.a,{size:"small"}):function(e){return ee(W(e))}(n)})}),Object(F.jsx)(u.a.Item,{label:"Cash Balance",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:i&&!m?ee(i.cash):Object(F.jsx)(b.a,{size:"small"})})}),Object(F.jsx)(u.a.Item,{label:"Total Gain/Loss",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:d||!n?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{style:Q(n)<0?{color:"red"}:{color:void 0},children:function(e){return ee(Q(e))}(n)})})})]}))]})},Oe=n(279);var ve,ge=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){I().then((function(e){e&&r(s(e))}))}),[]);var s=function(e){var t,n=[],a=Object(G.a)(e.assets);try{for(a.s();!(t=a.n()).done;){var r=t.value;Z(r),K(r),n.push({name:r.stock.name,symbol:r.stock.symbol,bid:ee(r.stock.price.bid||r.stock.price.previousClose),ask:ee(r.stock.price.ask||r.stock.price.previousClose),quantity:$(r).toString(),costBasis:ee(K(r)),currentValue:ee(_(r)),percentOfAccount:te(X(e,r)),gain:ee(Z(r)),gainPercent:te(Z(r)/K(r))})}}catch(s){a.e(s)}finally{a.f()}return n.push({name:"Cash",currentValue:ee(e.info.cash),costBasis:ee(e.info.cash),percentOfAccount:te(e.info.cash/W(e))}),n},c=[{title:"Symbol",dataIndex:"symbol",key:"symbol"},{title:"Asset",dataIndex:"name",key:"name"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Bid",dataIndex:"bid",key:"bid"},{title:"Ask",dataIndex:"ask",key:"ask"},{title:"Current Value",dataIndex:"currentValue",key:"currentValue"},{title:"Cost Basis",dataIndex:"costBasis",key:"costBasis"},{title:"Percentage of Account",dataIndex:"percentOfAccount",key:"percentOfAccount"},{title:"Total Gain/Loss",dataIndex:"gain",key:"gain",onCell:function(e){return{style:{color:(t=e.gain,(t?(t=t.replace("$",""),parseFloat(t)):0)<0?"red":"black")}};var t}},{title:"Total Gain/Loss %",dataIndex:"gainPercent",key:"gainPercent",onCell:function(e){return{style:{color:(t=e.gainPercent,(t?(t=t.replace("%",""),parseFloat(t)):0)<0?"red":"black")}};var t}}];return Object(F.jsx)("div",{className:"Positions",children:Object(F.jsx)("header",{className:"Overview-header",children:void 0===n?Object(F.jsx)("div",{children:Object(F.jsx)(b.a,{size:"default"})}):Object(F.jsx)(Oe.a,{dataSource:n,columns:c,pagination:{pageSize:100}})})})},ye=n(114),ke=n(278);function we(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),c=Object(o.a)(s,2),i=c[0],p=c[1],h=Object(a.useState)(0),x=Object(o.a)(h,2),m=x[0],O=x[1],v=Object(a.useState)(0),g=Object(o.a)(v,2),y=g[0],k=g[1],w=Object(a.useState)(0),I=Object(o.a)(w,2),S=(I[0],I[1]),C=Object(a.useState)(null),P=Object(o.a)(C,2),T=P[0],E=P[1],N=Object(a.useState)(0),B=Object(o.a)(N,2),z=B[0],Y=B[1],M=Object(a.useRef)(""),V=Object(a.useState)(!1),R=Object(o.a)(V,2),G=R[0],q=R[1],H=Object(a.useState)(!1),J=Object(o.a)(H,2),K=J[0],$=J[1];Object(a.useEffect)((function(){A().then((function(e){Y(e)}))}),[]),Object(a.useEffect)((function(){q(!0),M.current=n,D(n).then((function(e){n===M.current&&(q(!1),E(e),e?($(!0),U(n).then((function(e){$(!1),O(e.ask)})).catch((function(e){$(!1)}))):O(null),q(!1))})).catch((function(e){q(!1)}))}),[n]),Object(a.useEffect)((function(){if(null!=T&&null!=m){var e=i*m;S(e),k(e>0?e+15:e)}else S(0),k(0)}),[T,m,i]);var _=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(z<y)){e.next=3;break}return window.alert("You don't have enough cash for  that purchase "),e.abrupt("return");case 3:T?(t="Please confirm purchase of "+i+" shares of "+T+" for a total of "+ee(y)+".",window.confirm(t)&&L(n,i,m||0).then((function(e){var t=e.successful,n=e.remainingCash;t&&(window.alert("Purchase successful. New cash balance is "+ee(n)),window.location.assign("/transactions"))}),(function(){window.alert("Purchase was not executed due to critical server error")}))):window.alert("Purchase cancelled");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(F.jsxs)(u.a,Object(xe.a)(Object(xe.a)({name:"buy"},{labelCol:{span:2,offset:0},wrapperCol:{span:6,offset:1}}),{},{children:[Object(F.jsxs)(u.a.Item,{label:"Stock",children:[Object(F.jsx)(l.a,{value:n,placeholder:"Enter stock ticker symbol",onChange:function(e){r(e.target.value.toUpperCase())}}),Object(F.jsxs)(F.Fragment,{children:[G?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{style:n&&T?{color:void 0}:{color:"red"},children:n?T||"Invalid ticker symbol":""})," "]})]}),Object(F.jsx)(u.a.Item,{label:"Current Ask Price",children:K||G?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{children:m?ee(m):"Please enter a valid ticker symbol"})}),Object(F.jsx)(u.a.Item,{label:"Shares to Buy",children:Object(F.jsx)(l.a,{placeholder:"Enter number of shares to buy",onChange:function(e){var t=e.target.value,n=Number.parseInt(t);p(n||0)},value:0===i?void 0:i})}),Object(F.jsx)(u.a.Item,{label:"Commission",children:Object(F.jsx)("label",{children:ee(15)})}),Object(F.jsx)(u.a.Item,{label:"Total Cost",children:i>0&&(G||K)?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{style:y>z?{color:"red"}:{color:void 0},children:i>0?ee(y):"Please enter the number of shares to buy"})}),Object(F.jsx)(u.a.Item,Object(xe.a)(Object(xe.a)({},{wrapperCol:{offset:3,span:16}}),{},{children:Object(F.jsx)(j.a,{type:"primary",onClick:_,disabled:0===i||K||G||!T||y>z,children:"Submit"})}))]}))}function Ie(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),c=Object(o.a)(s,2),i=c[0],p=c[1],h=Object(a.useState)(void 0),x=Object(o.a)(h,2),m=x[0],O=x[1],v=Object(a.useState)(0),g=Object(o.a)(v,2),y=g[0],k=g[1],w=Object(a.useState)({bid:0,ask:0,previousClose:0}),I=Object(o.a)(w,2),S=I[0],P=I[1],A=Object(a.useState)(!1),D=Object(o.a)(A,2),T=D[0],E=D[1],L=function(){var e=Object(f.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y>B(m))){e.next=3;break}return window.alert("Insufficient shares for this sale"),e.abrupt("return");case 3:if(!m){e.next=15;break}if(t=S.bid*y-15,n="Please confirm sale of "+y+" shares of "+m.stock.name+" for a total of "+ee(t)+".",!window.confirm(n)){e.next=14;break}return e.next=10,N(m.stock.symbol,y,S.bid||0);case 10:(a=e.sent)?(window.alert("Sale confirmed. New cash balance is "+ee(a.remainingCash)),window.location.assign("/")):window.alert("Sale failed: "+a),e.next=15;break;case 14:alert("Sale cancelled");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){p(!0),C().then((function(e){r(e),p(!1),e&&e.length>0&&O(e[0])}))}),[]),Object(a.useEffect)((function(){m&&(E(!0),k(0),U(m.stock.symbol).then((function(e){P(e),E(!1)})))}),[m]);return Object(F.jsx)(F.Fragment,{children:i?Object(F.jsx)(b.a,{size:"large"}):n&&0!=n.length?Object(F.jsxs)(u.a,Object(xe.a)(Object(xe.a)({name:"sell"},{labelCol:{span:2,offset:0},wrapperCol:{span:6,offset:1}}),{},{children:[Object(F.jsx)(u.a.Item,{label:"Stock",children:Object(F.jsx)(ye.a,{onChange:function(e){if(n&&e){var t=n.find((function(t){return t.stock.symbol.toUpperCase()===e.toUpperCase()}));t&&(O(t),k(0))}},defaultValue:n[0].stock.symbol,value:null===m||void 0===m?void 0:m.stock.symbol,children:n.map((function(e){return Object(F.jsx)(ye.a.Option,{value:e.stock.symbol,children:e.stock.name+"  ("+e.stock.symbol+")"})}))})}),Object(F.jsx)(u.a.Item,{label:"Current Bid Price",children:T?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsxs)("label",{children:[" ",ee(S.bid)]})}),Object(F.jsx)(u.a.Item,{label:"Shares to Sell",children:Object(F.jsx)(l.a,{placeholder:m?B(m)+" shares of "+m.stock.symbol+" available to sell":"Enter number of shares to sell",onChange:function(e){var t=e.target.value,n=Number.parseInt(t);k(n||0)},value:0==y?void 0:y,style:y>B(m)?{color:"red"}:{color:void 0}})}),Object(F.jsx)(u.a.Item,{label:"Commission",children:Object(F.jsx)("label",{children:ee(15)})}),Object(F.jsx)(u.a.Item,{label:"Net Proceeds",children:T&&y>0?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{children:y>B(m)?"You may sell a maximum of "+B(m)+" shares of "+(null===m||void 0===m?void 0:m.stock.symbol):0==y?"Please enter the number of shares to sell":y>0?ee(S.bid*y-15):0})}),Object(F.jsx)(u.a.Item,Object(xe.a)(Object(xe.a)({},{wrapperCol:{offset:3,span:16}}),{},{children:Object(F.jsx)(j.a,{type:"primary",onClick:L,disabled:!m||!S||y<=0||y>B(m),children:"Submit"})}))]})):Object(F.jsx)(je.a,{description:"You do not have any stocks to sell"})})}!function(e){e.BUY="BUY",e.SELL="SELL"}(ve||(ve={}));var Se=function(){var e=Object(a.useState)(ve.BUY),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("br",{}),Object(F.jsx)(u.a,Object(xe.a)(Object(xe.a)({name:"trade"},{labelCol:{span:2,offset:0},wrapperCol:{span:2}}),{},{children:Object(F.jsx)(u.a.Item,{label:"Trade Type",labelAlign:"left",children:Object(F.jsxs)(ye.a,{onChange:function(e){r(e)},defaultValue:ve.BUY,children:[Object(F.jsx)(ye.a.Option,{value:ve.BUY,children:ve.BUY}),Object(F.jsx)(ye.a.Option,{value:ve.SELL,children:ve.SELL})]})})})),Object(F.jsx)(ke.a,{orientation:"left",orientationMargin:"0",children:n==ve.BUY?"Buy Stock":"Sell Stock"}),n==ve.BUY?Object(F.jsx)(we,{}):Object(F.jsx)(Ie,{})]})};var Ce=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){P().then((function(e){r(s(e))}))}),[]);var s=function(e){var t,n=[],a=Object(G.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({date:ne(r.date,!0),description:c(r),amount:r.amount?ee(r.amount):ee(0),cash:ee(r.cash)})}}catch(s){a.e(s)}finally{a.f()}return n},c=function(e){var t="";switch(e.type){case V.BUY:t="Buy "+e.shares+" of "+e.name+" ("+e.symbol+") at "+ee(be(e));break;case V.DIVIDEND:t="Dividend on "+e.shares+" shares of "+e.name+" ("+e.symbol+")";break;case V.GIFT:t="Initial Deposit";break;case V.SELL:t="Sell "+e.shares+" of "+e.name+" ("+e.symbol+") at "+ee(be(e));break;case V.SPLIT:t=e.symbol+" "+e.to+"-for-"+e.from+" Stock Split";break;default:console.log("This is transaction type: "+e.type),t="There is no describing this transaction"}return t};return Object(F.jsxs)("div",{className:"Transactions",children:[Object(F.jsx)("header",{className:"Transactions-header"}),void 0===n?Object(F.jsx)(b.a,{size:"default"}):Object(F.jsx)(Oe.a,{dataSource:n,columns:[{title:"Date",dataIndex:"date",key:"date"},{title:"Description",dataIndex:"description",key:"description"},{title:"Amount",dataIndex:"amount",key:"amount"},{title:"Cash Balance",dataIndex:"cash",key:"cash"}],pagination:{pageSize:100}})]})},Pe=R.a.TabPane,Ae=Object(F.jsx)(j.a,{type:"primary",onClick:function(){window.confirm("OK to Log Out?")&&(sessionStorage.removeItem(h),window.location.assign("/login"))},children:"Logout"});var De=function(){return Object(F.jsxs)(R.a,{style:{paddingTop:"5px",paddingLeft:"10px",paddingRight:"5px",boxSizing:"content-box"},tabBarExtraContent:Ae,tabPosition:"top",type:"card",children:[Object(F.jsx)(Pe,{tab:"Overview",children:Object(F.jsx)(me,{})},"1"),Object(F.jsx)(Pe,{tab:"Positions",children:Object(F.jsx)(ge,{})},"2"),Object(F.jsx)(Pe,{tab:"Transactions",children:Object(F.jsx)(Ce,{})},"3"),Object(F.jsx)(Pe,{tab:"Analysis",children:Object(F.jsx)(he,{})},"4"),Object(F.jsx)(Pe,{tab:"Trade",children:Object(F.jsx)(Se,{})},"5")]})},Te=n(187),Ee=n(42);var Le=function(){return Object(F.jsxs)(u.a,Object(xe.a)(Object(xe.a)({name:"signup"},{labelCol:{span:2,offset:0},wrapperCol:{span:10,offset:1}}),{},{onFinish:function(e){k(e.userID,e.password,e.name).then((function(t){t?(window.location.assign("/login"),window.alert("Welcome, "+e.name+". Your account was successfully created.")):window.alert("Error creating account")}))},children:[Object(F.jsx)(u.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name"}],children:Object(F.jsx)(l.a,{placeholder:"Fred Smith"})}),Object(F.jsx)(u.a.Item,{label:"User ID",name:"userID",rules:[{required:!0,message:"Please input your user ID"}],children:Object(F.jsx)(l.a,{placeholder:"stock-market-whiz"})}),Object(F.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password"}],children:Object(F.jsx)(l.a.Password,{autoComplete:"new-password"})}),Object(F.jsx)(u.a.Item,{wrapperCol:{offset:8,span:3},children:Object(F.jsx)(j.a,{type:"primary",htmlType:"submit",children:"Sign Up"})})]}))},Ne=n(180);function Ue(){return Object(F.jsx)("div",{children:Object(F.jsx)(Te.a,{children:Object(F.jsxs)("div",{children:[Object(F.jsx)(Ne.a,{children:Object(F.jsx)("title",{children:"Investment Simulator"})}),Object(F.jsx)(M,{}),Object(F.jsx)("br",{}),Object(F.jsxs)(Ee.c,{children:[Object(F.jsx)(Ee.a,{path:"/signup",children:Object(F.jsx)(Le,{})}),Object(F.jsx)(Ee.a,{path:"/login",children:y()?Object(F.jsx)(De,{}):Object(F.jsx)(z,{})}),Object(F.jsx)(Ee.a,{path:"/",children:y()?Object(F.jsx)(De,{}):Object(F.jsx)(z,{})})]})]})})})}var Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,283)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(Ue,{})}),document.getElementById("root")),Be()}},[[276,1,2]]]);
//# sourceMappingURL=main.5ad02073.chunk.js.map