{"version":3,"sources":["constants.ts","APIService.ts","scenes/Login.tsx","components/stocks.png","components/Header.tsx","types.ts","Calculations.ts","scenes/Analysis.tsx","scenes/Overview.tsx","scenes/Positions.tsx","scenes/Trade.tsx","components/Buy.tsx","components/Sell.tsx","scenes/Transactions.tsx","scenes/NavPane.tsx","scenes/SignUp.tsx","App.tsx","reportWebVitals.js","index.js"],"names":["AUTH_TOKEN_KEY","getURL","endpoint","params","console","log","process","url","queryString","URLSearchParams","toString","createRequestAuthorization","methodType","method","headers","authorization","sessionStorage","getItem","isLoggedIn","doSignup","userID","password","name","a","requestOptions","body","JSON","stringify","fetch","response","status","success","message","json","responseObj","doLogin","setItem","token","getAccount","account","getUserInfo","userResponseObj","getAssets","assets","getTransactions","transactions","getCash","cash","lookupTicker","tickerSymbol","urlString","text","getHistoricalPrices","symbol","startDate","queryURLString","ticker","date","toDateString","buyAsset","shares","price","sharesString","priceString","cashRemainingAfterPurchase","successful","remainingCash","sellAsset","getStockPrice","getShareCount","asset","totalCount","lots","map","currLot","Login","useState","loggingIn","setLoggingIn","labelCol","span","wrapperCol","initialValues","remember","onFinish","values","username","then","info","AntMessage","window","location","assign","error","onFinishFailed","errorInfo","autoComplete","Item","label","rules","required","Password","offset","size","type","htmlType","onClick","Header","userInfo","setUserInfo","useEffect","style","padding","fontSize","width","height","backgroundColor","src","stockIcon","verticalAlign","color","font","textAlign","paddingLeft","TransactionType","getCostBasis","costBasis","lot","basis","getQuantity","quantity","getAssetValue","stock","bid","previousClose","getGain","user","getAccountValue","total","getPercentOfAccount","getGainLoss","formatCurrency","money","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","formatPercent","percent","formatDate","long","dateToFormat","Date","isValid","formatStr","getTransactionsOnDate","dateTransactions","setHours","transaction","transactionDate","getTime","push","adjustForSplits","buyOrSell","SPLIT","toUpperCase","to","from","getPortfolioSnapshots","tickerMap","Map","snapshots","endDate","now","setDate","getDate","BUY","get","adjustedShares","undefined","set","amount","DIVIDEND","SELL","GIFT","positions","forEach","priceMap","getPriceHistory","prices","getStockPriceOnDateLocal","history","startDiff","length","Math","abs","endDiff","i","data","getHistoricalValues","snapshot","snapshotDate","stockValues","position","stockValue","value","stocks","clear","calcSharePrice","commission","Chart","register","registerables","lineColors","Analysis","chartData","setChartData","historicalValues","createChartData","portfolioValues","labels","datasets","totalValues","cashValues","originalValues","thinnedValues","interval","dateIdx","floor","thinPortfolioValues","stockValueMap","portfolioValue","key","NaN","id","pointRadius","pointHoverRadius","borderColor","colorId","colorName","className","description","datasetIdKey","Overview","setAccount","loadingAccount","setLoadingUser","loadingUserInfo","setLoadingAccount","foundUserInfo","foundUser","labelAlign","created","getAccountValueString","getGainString","Positions","TradeType","setData","calcData","ask","currentValue","percentOfAccount","gain","gainPercent","columns","title","dataIndex","onCell","record","replace","parseFloat","dataSource","pagination","pageSize","Buy","typedSymbol","setTypedSymbol","sharesToBuy","setSharesToBuy","askPrice","setAskPrice","totalCost","setTotalCost","setShareCost","companyName","setCompanyName","setCash","currentTypedSymbol","useRef","loadingStock","setLoadingStock","loadingPrice","setLoadingPrice","userCash","current","foundCompanyName","foundPrice","catch","ex","shareOnlyCost","handlePurchase","alert","msg","confirm","buyAssetResponse","placeholder","onChange","e","target","typedValue","Number","parseInt","disabled","Sell","setAssets","loadingAssets","setLoadingAssets","setAsset","sharesToSell","setSharesToSell","setPrice","handleSale","foundAssets","foundAsset","find","currAsset","defaultValue","Option","Trade","tradeType","setTradeType","orientation","orientationMargin","Transactions","rows","createDescription","TabPane","Tabs","logoutButton","removeItem","NavPane","paddingTop","paddingRight","boxSizing","tabBarExtraContent","tabPosition","tab","SignUp","App","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0600db64.chunk.js","sourcesContent":["export const AUTH_TOKEN_KEY:string = \"AUTH_TOKEN_KEY\"\r\nexport default {\r\n    AUTH_TOKEN_KEY\r\n}","import { AUTH_TOKEN_KEY } from \"./constants\";\r\nimport {\r\n  Asset,\r\n  Dividend,\r\n  SpotPrice,\r\n  Transaction,\r\n  Account,\r\n  UserInfo,\r\n  HistoricalPrice,\r\n} from \"./types\";\r\nimport fetch, { RequestInit } from \"node-fetch\";\r\n\r\nconst isFrontendLocal = ():boolean => {\r\n  return process.env.NODE_ENV === \"development\"\r\n}\r\n\r\nconst isBackendLocal = (): boolean => {\r\n   return false;\r\n}\r\n\r\nconst isBackendRemote = (): boolean => {\r\n  return !isBackendLocal()\r\n}\r\n\r\nconst isFrontendRemote = (): boolean => {\r\n  return !isFrontendLocal()\r\n}\r\nconst AWS_PREFIX:string = \"https://reshortt.me\"\r\nconst LOCAL_PREFIX:string = \"http://localhost:3005\"\r\n\r\nconst getURL = (endpoint:string, params:Record<string, string>={}):string => {\r\n\r\n\r\n  console.log (\"NODE_ENV = \", process.env.NODE_ENV)\r\n\r\n  let prefix:string= \"\"\r\n  if (isBackendLocal() && isFrontendLocal()) {\r\n    prefix = LOCAL_PREFIX   \r\n  }\r\n  else if (isFrontendLocal() && isBackendRemote()){\r\n    prefix = AWS_PREFIX\r\n  }\r\n  else if (isFrontendRemote() && isBackendRemote()) {\r\n    prefix = \"\"\r\n  }\r\n  \r\n  let url:string = prefix + endpoint\r\n  const queryString:string = new URLSearchParams(params).toString()\r\n  return url + \"?\" + queryString;\r\n}\r\n\r\n\r\n\r\nconst createRequestAuthorization = (methodType = \"GET\"): RequestInit => {\r\n  return {\r\n    method: methodType,\r\n    headers: {\r\n      authorization: `Bearer ${sessionStorage.getItem(AUTH_TOKEN_KEY)}`,\r\n    },\r\n  };\r\n};\r\n\r\nexport const isLoggedIn = (): boolean =>\r\n  !!sessionStorage.getItem(AUTH_TOKEN_KEY);\r\n\r\nexport const doLogout = () => {\r\n  sessionStorage.removeItem(AUTH_TOKEN_KEY);\r\n};\r\n\r\nexport const doSignup = async (\r\n  userID: string,\r\n  password: string,\r\n  name: string\r\n): Promise<{success:boolean, message:string}> => {\r\n\r\n  const requestOptions = {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      userID,\r\n      password,\r\n      name,\r\n    }),\r\n  };\r\n  const response = await fetch(getURL(\"/API/signup\"), requestOptions);\r\n\r\n  const status: number = response.status;\r\n\r\n  if (status === 200) {\r\n    return{success:true, message: \"\"};\r\n  } else {\r\n    const responseObj:any = (await response.json()) as object\r\n    console.log(\"Signup failed: \" + responseObj.message);\r\n    return {success:false, message: responseObj.message};\r\n  }\r\n};\r\n\r\nexport const doLogin = async (\r\n  userID: string,\r\n  password: string\r\n): Promise<boolean> => {\r\n\r\n  const requestOptions = {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ userID, password }),\r\n  };\r\n  const response = await fetch (getURL(\"/API/login\"), requestOptions);\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      const responseObj = await response.json();\r\n      sessionStorage.setItem(AUTH_TOKEN_KEY, responseObj.token);\r\n      console.log(\"Successful login: \" + responseObj);\r\n      return true;\r\n\r\n    case 401:\r\n    case 400:\r\n      // todo: better way to show error\r\n      console.log(\"unsuccessful login for user \" + userID);\r\n      return false;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected login response\");\r\n      return false;\r\n  }\r\n};\r\n\r\nexport const getAccount = async (): Promise<Account | null> => {\r\n  const requestOptions = createRequestAuthorization();\r\n  const response = await fetch(\r\n    getURL(\"/API/getAccount\"),\r\n    requestOptions\r\n  );\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      const account: Account = await response.json();\r\n      return account;\r\n\r\n    case 401:\r\n      // todo: better way to show error\r\n      console.log(await response.json());\r\n      return null;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getAccount response\");\r\n      return null;\r\n  }\r\n};\r\n\r\nexport const getUserInfo = async (): Promise<UserInfo | null> => {\r\n  const requestOptions = createRequestAuthorization();\r\n  const response = await fetch(\r\n    getURL(\"/API/getUserInfo\"),\r\n    requestOptions\r\n  );\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      const userResponseObj = await response.json();\r\n      return userResponseObj;\r\n\r\n    case 401:\r\n      // todo: better way to show error\r\n      console.log(await response.json());\r\n      return null;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getUser response\");\r\n      return null;\r\n  }\r\n};\r\n\r\nexport const getBalance = async (yesterday: boolean): Promise<number> => {\r\n  const requestOptions = createRequestAuthorization()\r\n\r\n  const urlString = getURL(\"/API/getBalance\", {yesterday: `${yesterday}`});\r\n  const response = await fetch(urlString, requestOptions);\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      const userResponseObj = await response.json();\r\n      return userResponseObj.balance;\r\n\r\n    case 401:\r\n      // todo: better way to show error\r\n      console.log(await response.json());\r\n      return userResponseObj;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getUser response\");\r\n      return userResponseObj;\r\n  }\r\n};\r\n\r\nexport const getAssets = async (): Promise<Asset[]> => {\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n  const response = await fetch(\r\n    getURL(\"/API/getAssets\"),\r\n    requestOptions\r\n  );\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      const userResponseObj = await response.json();\r\n\r\n      console.log(\"Assets retrieved: \" + userResponseObj.assets);\r\n      return userResponseObj.assets;\r\n\r\n    case 401:\r\n      // todo: better way to show error\r\n      console.log(await response.json());\r\n      return userResponseObj;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getAssets response\");\r\n      return userResponseObj;\r\n  }\r\n};\r\n\r\nexport const getTransactions = async (): Promise<Transaction[]> => {\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n  const response = await fetch(\r\n    getURL(\"/API/getTransactions\"),\r\n    requestOptions\r\n  );\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      const userResponseObj = await response.json();\r\n\r\n      //console.log(\"Transactions retrieved: \" + userResponseObj.transactions);\r\n      return userResponseObj.transactions;\r\n\r\n    case 401:\r\n      // todo: better way to show error\r\n      console.log(await response.json());\r\n      return userResponseObj;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getAssets response\");\r\n      return userResponseObj;\r\n  }\r\n};\r\n\r\nexport const getCash = async (): Promise<number> => {\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n  const response = await fetch(\r\n    getURL(\"/API/getCash\"),\r\n    requestOptions\r\n  );\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      const userResponseObj = await response.json();\r\n\r\n      return userResponseObj.cash;\r\n\r\n    case 401:\r\n      // todo: better way to show error\r\n      console.log(await response.json());\r\n      return userResponseObj;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getAssets response\");\r\n      return userResponseObj;\r\n  }\r\n};\r\n//TODO: don't lookup empty or null string\r\nexport const lookupTicker = async (\r\n  tickerSymbol: string\r\n): Promise<string | null> => {\r\n  console.log(\"Looking up ticker: \" + tickerSymbol + \".......\");\r\n\r\n  // TODO: credentials not needed for stocklookup. ...remove\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n  const urlString:string = getURL(\"/API/lookupTicker\", {\r\n    tickerSymbol: tickerSymbol,\r\n  });\r\n\r\n  const response = await fetch(urlString, requestOptions);\r\n\r\n  console.log(\"ticker lookup: \", response.status, \" - \", response.json);\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      const userResponseObj: string = await response.text();\r\n      return userResponseObj;\r\n\r\n    case 400:\r\n      // todo: better way to show error\r\n      //console.log(await response.json());\r\n      return null;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected lookupTicker response\");\r\n      return null;\r\n  }\r\n};\r\n\r\nexport async function getHistoricalDividends(\r\n  symbol: string\r\n): Promise<Dividend[]> {\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n\r\n  const queryURLString = getURL(\"/API/getHistoricalDividends\", { ticker: symbol } );\r\n  const response = await fetch(queryURLString, requestOptions);\r\n\r\n  switch (response.status) {\r\n    case 200: {\r\n      return await response.json();\r\n    }\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getDividends response\");\r\n      return [];\r\n  }\r\n}\r\n\r\nexport async function getStockPriceOnDate(\r\n  symbol: string,\r\n  date: Date\r\n): Promise<number> {\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n \r\n  const queryURLString = getURL(\"/API/getStockPriceOnDate\", {\r\n    ticker: symbol,\r\n    date: date.toDateString(),\r\n  });\r\n\r\n  const response = await fetch(queryURLString, requestOptions);\r\n  switch (response.status) {\r\n    case 200: {\r\n      const responseObj = await response.json();\r\n\r\n      return responseObj.price;\r\n    }\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected buyAsset response\");\r\n      return 0;\r\n  }\r\n}\r\n\r\nexport async function getHistoricalPrices(\r\n  symbol: string,\r\n  startDate: Date\r\n): Promise<HistoricalPrice[]> {\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n  const queryURLString = getURL(\"/API/getHistoricalPrices\", {\r\n    ticker: symbol,\r\n    date: startDate.toDateString(),\r\n  })\r\n  console.log (\"Getting  historical prices for \", symbol, \" with URL=\", queryURLString)\r\n\r\n  const response = await fetch(queryURLString, requestOptions);\r\n  switch (response.status) {\r\n    case 200: {\r\n      const responseObj = await response.json();\r\n      return responseObj\r\n    }\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected buyAsset response\");\r\n      return [];\r\n  }\r\n}\r\n\r\nexport type BuyAssetResponse = {\r\n  successful: boolean;\r\n  remainingCash: number;\r\n};\r\n\r\nexport const buyAsset = async (\r\n  symbol: string,\r\n  shares: number,\r\n  price: number\r\n): Promise<BuyAssetResponse> => {\r\n  // TODO: credentials not needed for stocklookup.remove\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n  const sharesString: string = shares.toString();\r\n  const priceString: string = price.toString();\r\n  const urlString:string = getURL(\"/API/buyAsset\", {\r\n    tickerSymbol: symbol,\r\n    shares: sharesString,\r\n    price: priceString,\r\n  });\r\n\r\n\r\n  const response = await fetch(urlString, requestOptions);\r\n\r\n  switch (response.status) {\r\n    case 200: {\r\n      const userResponseObj = await response.json();\r\n      const cashRemainingAfterPurchase: number = userResponseObj.cash;\r\n      return { successful: true, remainingCash: cashRemainingAfterPurchase };\r\n    }\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected buyAsset response\");\r\n      return { successful: false, remainingCash: 0 };\r\n  }\r\n};\r\n\r\nexport type SellAssetResponse = {\r\n  successful: boolean;\r\n  remainingCash?: number;\r\n};\r\n\r\nexport const sellAsset = async (\r\n  symbol: string,\r\n  shares: number,\r\n  price: number\r\n) => {\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n  const sharesString: string = shares.toString();\r\n  const priceString: string = price.toString();\r\n  const urlString = getURL(\"/API/sellAsset\", {\r\n    tickerSymbol: symbol,\r\n    shares: sharesString,\r\n    price: priceString,\r\n  });\r\n\r\n  const response = await fetch(urlString, requestOptions);\r\n\r\n  console.log(\"response: \", response.status);\r\n\r\n  switch (response.status) {\r\n    case 200: {\r\n      const userResponseObj = await response.json();\r\n      const cashRemainingAfterPurchase: number = userResponseObj.cash;\r\n      return { successful: true, remainingCash: cashRemainingAfterPurchase };\r\n    }\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getAssets response\");\r\n      return false;\r\n  }\r\n};\r\n\r\nexport const getStockPrice = async (\r\n  tickerSymbol: string\r\n): Promise<SpotPrice> => {\r\n  // TODO: credentials not needed for stocklookup.remove\r\n  const requestOptions = createRequestAuthorization();\r\n\r\n  const urlString:string = getURL(\"/API/getStockPrice\", {\r\n    tickerSymbol: tickerSymbol,\r\n  });\r\n  const response = await fetch(urlString, requestOptions);\r\n\r\n  const userResponseObj = await response.json();\r\n  console.log(\"Get Stock Price Response:: \", userResponseObj);\r\n\r\n  switch (response.status) {\r\n    case 200:\r\n      //const userResponseObj = await response.json();\r\n      return userResponseObj;\r\n\r\n    case 401:\r\n      // todo: better way to show error\r\n      console.log(await response.json());\r\n      return userResponseObj;\r\n\r\n    default:\r\n      // 500 is possible for critical server erropr\r\n      console.log(\"unexpected getAssets response\");\r\n      return userResponseObj;\r\n  }\r\n};\r\n\r\nexport const getShareCount = (asset: Asset | null | undefined): number => {\r\n\r\n  var totalCount: number = 0;\r\n  if (!asset) return 0;\r\n\r\n  asset.lots.map((currLot) => {\r\n    totalCount += currLot.shares;\r\n  });\r\n\r\n  return totalCount;\r\n};\r\n","import { Button, Form, Input, message as AntMessage, Spin } from \"antd\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  doLogin,\r\n  getUserInfo,\r\n  isLoggedIn,\r\n} from \"../APIService\";\r\nimport \"antd/dist/antd.css\";\r\nimport { UserInfo } from \"../types\";\r\n\r\nfunction Login() {\r\n  const [loggingIn, setLoggingIn] = useState<boolean>(false);\r\n  \r\n  const onFinish = (values: any) => {\r\n    setLoggingIn(true);\r\n    doLogin(values.username, values.password).then((success: boolean) => {\r\n      setLoggingIn(false);\r\n      if (!success) {\r\n        AntMessage.error(\"Invalid credentials\");\r\n      } else {\r\n        getUserInfo().then((info: UserInfo | null) => {\r\n          AntMessage.success(\r\n            \"User \" + info?.name + \" successfully logged in\",\r\n            1\r\n          ).then(() => {\r\n            window.location.assign(\"/\");\r\n          });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo: any) => {\r\n    console.log(\"Failed:\", errorInfo);\r\n  };\r\n\r\n  const onSignUp = () => {\r\n    window.location.assign(\"/signup\");\r\n  };\r\n\r\n  return (\r\n    <Form\r\n      name=\"basic\"\r\n      labelCol={{\r\n        span: 8,\r\n      }}\r\n      wrapperCol={{\r\n        span: 16,\r\n      }}\r\n      initialValues={{\r\n        remember: true,\r\n      }}\r\n      onFinish={onFinish}\r\n      onFinishFailed={onFinishFailed}\r\n      autoComplete=\"off\"\r\n    >\r\n      <Form.Item\r\n        label=\"User name\"\r\n        name=\"username\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Please input your username\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Password\"\r\n        name=\"password\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Please input your password!\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        wrapperCol={{\r\n          offset: 8,\r\n          span: 16,\r\n        }}\r\n      >\r\n        {loggingIn || isLoggedIn() ? (\r\n          <Spin size=\"small\" />\r\n        ) : (\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            Login\r\n          </Button>\r\n        )}\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        wrapperCol={{\r\n          offset: 8,\r\n          span: 16,\r\n        }}\r\n      >\r\n        <label>No Account? </label>\r\n\r\n        <Button type=\"link\" onClick={onSignUp}>\r\n          Sign Up\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","export default __webpack_public_path__ + \"static/media/stocks.0f6444bc.png\";","import { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components/macro\";\r\nimport { getUserInfo, isLoggedIn } from \"../APIService\";\r\nimport { UserInfo } from \"../types\";\r\nimport stockIcon from \"./stocks.png\";\r\n\r\nexport default function Header() {\r\n  // const Container = styled.div`\r\n  //   padding-left: 10px;\r\n  //   padding-bottom: 60px;\r\n  //   font-size: 16px;\r\n  //   width: 100%;\r\n  //   height: 70px;\r\n  //   background-color: green;\r\n  //   flexdirection: row;\r\n  //   flexwrap: wrap;\r\n  //   flex: 1;\r\n  // `;\r\n\r\n  const [userInfo, setUserInfo] = useState<UserInfo | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn() && !userInfo) {\r\n      //console.log(\"Getting User Info . Currently it is \", userInfo)\r\n      getUserInfo().then((info: UserInfo | null) => {\r\n        if (info) {\r\n          setUserInfo(info);\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: \"20px 10px 50px\",\r\n        fontSize: \"16px\",\r\n        width: \"100%\",\r\n        height: \"60px\",\r\n        backgroundColor: \"green\",\r\n      }}\r\n    >\r\n      <img src={stockIcon} width=\"24\" height=\"24\" style={{\r\n        verticalAlign:\"middle\"\r\n      }} />\r\n      <label\r\n        style={{\r\n          color: \"white\",\r\n          font: \"Arial\",\r\n          textAlign: \"center\",\r\n          verticalAlign: \"bottom\",\r\n          paddingLeft: \"10px\"\r\n        }}\r\n      >\r\n        {userInfo\r\n          ? \" Investment Simulator - \" + userInfo.name\r\n          : \" Investment Simulator\"}{\" \"}\r\n      </label>\r\n    </div>\r\n  );\r\n}\r\n","export type Asset = {\r\n  stock: Stock;\r\n  lots: Lot[];\r\n}\r\n\r\nexport type Stock = {\r\n  name: string;\r\n  symbol: string;\r\n  price: SpotPrice;\r\n}\r\n\r\nexport type SpotPrice = {\r\n  bid: number;\r\n  ask: number;\r\n  previousClose: number;\r\n};\r\nexport type HistoricalPrice = { date: Date; price: number };\r\n\r\nexport type HistoricalData = {prices:HistoricalPrice[], dividends:Dividend[], splits:Split[]}\r\n\r\nexport type Dividend = {\r\n    date: Date; amount: number\r\n}\r\n\r\nexport type Split = {\r\n  date:Date, from:number, to:number\r\n}\r\n\r\nexport type UserInfo = {\r\n  name: string;\r\n  userID: string;\r\n  cash: number;\r\n  created: Date;\r\n}\r\nexport type Account = {\r\n  info:UserInfo;\r\n  transactions: Transaction[];\r\n  assets: Asset[];\r\n};\r\n\r\nexport type Lot = { shares: number; basis: number };\r\nexport type Transaction = {\r\n  date: Date;\r\n  type: TransactionType;\r\n  amount: number;\r\n  symbol: string;\r\n  shares: number;\r\n  name:string;\r\n  cash:number;\r\n  commission:number;\r\n  from:number,\r\n  to:number\r\n};\r\n\r\nexport enum TransactionType {\r\n  GIFT = \"GIFT\",\r\n  BUY=\"BUY\",\r\n  SELL=\"SELL\",\r\n  DIVIDEND=\"DIVIDEND\",\r\n  SPLIT=\"SPLIT\"\r\n}\r\n\r\nexport const COMMISSION: number = 15.0;\r\nexport const INITIAL_GIFT: number = 1000000;\r\n","import { format, isValid } from \"date-fns\";\r\nimport { getHistoricalPrices } from \"./APIService\";\r\nimport {\r\n  Asset,\r\n  INITIAL_GIFT,\r\n  Transaction,\r\n  TransactionType,\r\n  Account,\r\n  HistoricalPrice,\r\n} from \"./types\";\r\n\r\ntype Position = {\r\n  symbol: string;\r\n  shares: number;\r\n};\r\n\r\nexport type StockValue = {\r\n  symbol:string;\r\n  value:number;\r\n}\r\n\r\ntype PortfolioSnapshot = {\r\n  date: Date;\r\n  positions: Position[];\r\n  cash: number;\r\n};\r\n\r\nexport type PortfolioValue = {\r\n  date: Date;\r\n  stocks: StockValue[];\r\n  cash: number;\r\n  total: number;\r\n};\r\n\r\nexport const getCostBasis = (asset: Asset): number => {\r\n  var costBasis: number = 0;\r\n  for (var lot of asset.lots) {\r\n    //console.log(lot);\r\n    costBasis += lot.basis * lot.shares;\r\n  }\r\n  return costBasis;\r\n};\r\n\r\nexport const getQuantity = (asset: Asset): number => {\r\n  var quantity: number = 0;\r\n  for (var lot of asset.lots) {\r\n    quantity += lot.shares;\r\n  }\r\n  return quantity;\r\n};\r\n\r\nexport const getAssetValue = (asset: Asset): number => {\r\n  return (\r\n    getQuantity(asset) *\r\n    (asset.stock.price.bid || asset.stock.price.previousClose || 0)\r\n  );\r\n};\r\n\r\nexport const getGain = (user: Account): number => {\r\n  return getAccountValue(user) - INITIAL_GIFT;\r\n};\r\n\r\nexport const getAccountValue = (user: Account): number => {\r\n  var total: number = 0;\r\n  for (var asset of user.assets) {\r\n    total += getAssetValue(asset);\r\n  }\r\n  return total + user.info.cash;\r\n};\r\n\r\nexport const getPercentOfAccount = (user: Account, asset: Asset): number => {\r\n  return getAssetValue(asset) / getAccountValue(user);\r\n};\r\n\r\nexport const getGainLoss = (asset: Asset): number => {\r\n  return getAssetValue(asset) - getCostBasis(asset);\r\n};\r\n\r\nexport const getCash = (user: Account): number => {\r\n  return user.info.cash;\r\n};\r\n\r\nexport const formatCurrency = (money: number): string => {\r\n  return (\r\n    \"$\" +\r\n    new Intl.NumberFormat(\"en-us\", {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(money)\r\n  );\r\n};\r\n\r\nexport const formateDate = (date: Date): string => {\r\n  return new Intl.DateTimeFormat(\"en-us\", {\r\n    dateStyle: \"full\",\r\n  }).format(date);\r\n};\r\n\r\nexport const formatPercent = (percent: number): string => {\r\n  return (\r\n    new Intl.NumberFormat(\"en-us\", {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(100 * percent) + \"%\"\r\n  );\r\n};\r\n\r\nexport const formatDate = (date: Date, long: boolean): string => {\r\n  var dateToFormat: Date = new Date(date);\r\n  if (!isValid(dateToFormat)) return \"\";\r\n  const formatStr = long ? \"MMMM dd, yyyy\" : \"yyyy-MM-dd\";\r\n\r\n  return format(dateToFormat, formatStr);\r\n};\r\n\r\nfunction getTransactionsOnDate(\r\n  transactions: Transaction[],\r\n  date: Date\r\n): Transaction[] {\r\n  let dateTransactions: Transaction[] = [];\r\n  date.setHours(0, 0, 0, 0);\r\n  for (let transaction of transactions) {\r\n    let transactionDate: Date = new Date(transaction.date);\r\n    transactionDate.setHours(0, 0, 0, 0);\r\n    if (transactionDate > date) break;\r\n    if (transactionDate.getTime() === date.getTime())\r\n      dateTransactions.push(transaction);\r\n  }\r\n  return dateTransactions;\r\n}\r\n\r\nfunction adjustForSplits(\r\n  buyOrSell: Transaction,\r\n  transactions: Transaction[]\r\n): number {\r\n  let shares: number = buyOrSell.shares;\r\n  for (let transaction of transactions) {\r\n    if (\r\n      transaction.type === TransactionType.SPLIT &&\r\n      transaction.symbol.toUpperCase() === buyOrSell.symbol.toUpperCase()\r\n    ) {\r\n      if (transaction.date > buyOrSell.date) {\r\n        shares = shares * (transaction.to / transaction.from);\r\n      }\r\n    }\r\n  }\r\n  return shares;\r\n}\r\n\r\nasync function getPortfolioSnapshots(\r\n  transactions: Transaction[]\r\n): Promise<PortfolioSnapshot[]> {\r\n  const tickerMap = new Map<string, number>();\r\n\r\n  let snapshots: PortfolioSnapshot[] = [];\r\n  let cash: number = 0;\r\n  const startDate: Date = new Date(transactions[0].date);\r\n  const endDate: Date = new Date(Date.now());\r\n  endDate.setDate(endDate.getDate() - 1);\r\n\r\n  for (\r\n    let date: Date = startDate;\r\n    date < endDate;\r\n    date.setDate(date.getDate() + 1)\r\n  ) {\r\n    const dateTransactions: Transaction[] = getTransactionsOnDate(\r\n      transactions,\r\n      date\r\n    );\r\n\r\n    for (let transaction of dateTransactions) {\r\n      switch (transaction.type) {\r\n        case TransactionType.BUY: {\r\n          let shares: number | undefined = tickerMap.get(transaction.symbol);\r\n          const adjustedShares = adjustForSplits(transaction, transactions);\r\n          if (shares !== undefined) shares += adjustedShares;\r\n          else shares = adjustedShares;\r\n          tickerMap.set(transaction.symbol, shares);\r\n          cash -= transaction.amount;\r\n          break;\r\n        }\r\n        case TransactionType.DIVIDEND: {\r\n          cash += transaction.amount;\r\n          break;\r\n        }\r\n        case TransactionType.SELL: {\r\n          let shares: number | undefined = tickerMap.get(transaction.symbol);\r\n          const adjustedShares = adjustForSplits(transaction, transactions);\r\n          if (shares !== undefined) shares -= adjustedShares;\r\n          else {\r\n            console.log(\"******** Error - sold shares that were not owned\");\r\n            shares = 0;\r\n          }\r\n          tickerMap.set(transaction.symbol, shares);\r\n          cash += transaction.amount;\r\n          break;\r\n        }\r\n        case TransactionType.GIFT: {\r\n          cash += transaction.amount;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    //console.log(\"ticker map is \", tickerMap);\r\n    let positions: Position[] = [];\r\n\r\n    tickerMap.forEach((shares: number, tickerSymbol: string) => {\r\n      if (shares !== undefined && shares > 0) {\r\n        positions.push({ shares: shares, symbol: tickerSymbol });\r\n      }\r\n    });\r\n\r\n    snapshots.push({ cash: cash, date: new Date(date), positions: positions });\r\n  }\r\n\r\n  return snapshots;\r\n}\r\n\r\nconst priceMap: Map<string, HistoricalPrice[]> = new Map();\r\n\r\nconst getPriceHistory = async (\r\n  symbol: string,\r\n  startDate: Date\r\n): Promise<HistoricalPrice[]> => {\r\n  let prices: HistoricalPrice[] | undefined = priceMap.get(symbol);\r\n  if (prices) return prices;\r\n\r\n  prices = await getHistoricalPrices(symbol, startDate);\r\n  priceMap.set(symbol, prices);\r\n  return prices;\r\n};\r\n\r\nconst getStockPriceOnDateLocal = async (\r\n  symbol: string,\r\n  date: Date\r\n): Promise<number> => {\r\n  const history: HistoricalPrice[] = await getPriceHistory(symbol, date);\r\n\r\n  // start from the beginning?\r\n  const startDiff: number | undefined =\r\n    history.length > 2\r\n      ? Math.abs(new Date(history[0].date).getTime() - new Date(date).getTime())\r\n      : undefined;\r\n  const endDiff: number | undefined =\r\n    history.length > 2\r\n      ? Math.abs(new Date(history[history.length - 1].date).getTime() - new Date(date).getTime())\r\n      : undefined;\r\n\r\n  // closer to the end\r\n  if (startDiff && endDiff && startDiff > endDiff) {\r\n\r\n    for (let i = history.length-1; i >=0; --i) {\r\n      const data:HistoricalPrice = history[i] \r\n      const historicalDate: Date = new Date(data.date);\r\n      if (historicalDate <= date) {\r\n        //console.log(symbol, \"(Reverse) price of \", symbol, \" on \", date, \": \", data.price)\r\n        return data.price;\r\n      }\r\n    }\r\n  }\r\n  // start from the beginning\r\n  else {\r\n    for (let data of history) {\r\n      const historicalDate: Date = new Date(data.date);\r\n      if (historicalDate >= date) {\r\n        //console.log(symbol, \"(Forward) price of \", symbol, \" on \", date, \": \", data.price)\r\n        return data.price;\r\n      }\r\n    }\r\n  }\r\n  console.log(symbol, \"price on \", date, \": \", 0);\r\n  return 0;\r\n};\r\n\r\n\r\n// type StockValue = {\r\n//   symbol:string;\r\n//   value:number;\r\n// }\r\n\r\n// type PortfolioSnapshot = {\r\n//   date: Date;\r\n//   positions: Position[];\r\n//   cash: number;\r\n// };\r\n\r\n// export type PortfolioValue = {\r\n//   date: Date;\r\n//   values: StockValue[];\r\n// };\r\nexport const getHistoricalValues = async (\r\n  transactions: Transaction[]\r\n): Promise<PortfolioValue[]> => {\r\n  const values: PortfolioValue[] = [];\r\n\r\n  const snapshots: PortfolioSnapshot[] = await getPortfolioSnapshots(\r\n    transactions\r\n  );\r\n\r\n  for (let snapshot of snapshots) {\r\n    let total: number = 0;\r\n    const snapshotDate: Date = new Date(snapshot.date);\r\n    //var debugMsg:string = \"Date: \" + snapshotDate + \": \"\r\n\r\n    const stockValues:StockValue[] = []\r\n    for (let position of snapshot.positions) {\r\n      const price: number = await getStockPriceOnDateLocal(\r\n        position.symbol,\r\n        snapshotDate\r\n      );\r\n      //debugMsg += (\"-- \" + position.shares + \" of \" + position.symbol + \" at \" + price)\r\n      const stockValue:StockValue = {symbol: position.symbol, value:position.shares * price}\r\n      stockValues.push(stockValue)\r\n      total += stockValue.value;\r\n    }\r\n    //debugMsg += (\"-- cash: \" + snapshot.cash)\r\n    total += snapshot.cash;\r\n\r\n    //console.log(debugMsg)\r\n    values.push({ date: snapshotDate, cash:snapshot.cash, total:total, stocks: stockValues });\r\n  }\r\n\r\n  priceMap.clear();\r\n\r\n  return values;\r\n};\r\n\r\nexport const calcSharePrice = (transaction: Transaction): number => {\r\n  if (transaction.type === TransactionType.BUY) {\r\n    return (transaction.amount - transaction.commission) / transaction.shares;\r\n  } else {\r\n    const perShare: number =\r\n      (transaction.amount + transaction.commission) / transaction.shares;\r\n    return perShare;\r\n  }\r\n};\r\n\r\nexport const parseCash = (text:string):number => {\r\n  if (!text) return 0\r\n  text = text.replace(\"$\", '')\r\n  const floatVal:number = parseFloat(text)\r\n  return floatVal\r\n\r\n} \r\nexport const parsePercent = (text:string):number => {\r\n  if (!text) return 0\r\n  text = text.replace(\"%\", '')\r\n  const intVal:number = parseFloat(text)\r\n  return intVal\r\n} ","import { useEffect, useState } from \"react\";\r\nimport { getStockPriceOnDate, getTransactions } from \"../APIService\";\r\nimport {\r\n  formatDate,\r\n  getHistoricalValues,\r\n  PortfolioValue,\r\n  StockValue,\r\n} from \"../Calculations\";\r\n//import { Line, LineConfig } from \"@ant-design/plots\";\r\nimport { Empty, Spin } from \"antd\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport { Chart, registerables } from \"chart.js\";\r\n\r\nChart.register(...registerables);\r\n\r\nconst lineColors:string[] = [\"cadetblue\", \"darkorchid\", \"cornflowerblue\", \"indigo\", \"olive\", \"darkseagreen\", \"darkmagenta\"]\r\n\r\nconst POINT_RADIUS = 3.0\r\nconst POINT_HOVER_RADIUS = 6.0\r\n\r\ntype LineData = {\r\n  id: number;\r\n  label: string;\r\n  data: number[];\r\n  pointRadius: string;\r\n  pointHoverRadius:number,\r\n  backgroundColor: string;\r\n};\r\n\r\ntype ChartData = { labels: string[]; datasets: LineData[] };\r\n\r\nfunction Analysis() {\r\n  const [chartData, setChartData] = useState<ChartData | undefined>(undefined);\r\n\r\n  useEffect(() => {\r\n    getTransactions().then((transactions) => {\r\n      getHistoricalValues(transactions).then((historicalValues) => {\r\n        const chartData = createChartData(historicalValues);\r\n        setChartData(chartData);\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  const MAX_POINTS:number = 100\r\n\r\n  const thinPortfolioValues = (originalValues:PortfolioValue[]):PortfolioValue[] => {\r\n\r\n    if (originalValues.length < MAX_POINTS) {\r\n      return originalValues\r\n    }\r\n\r\n    const thinnedValues:PortfolioValue[] = []\r\n    const interval:number = originalValues.length/MAX_POINTS\r\n\r\n    for (let i:number=0; i < originalValues.length; i += interval) {\r\n      const dateIdx = Math.floor(i)\r\n      thinnedValues.push(originalValues[dateIdx])\r\n    }\r\n    if (thinnedValues[thinnedValues.length-1] != originalValues[originalValues.length-1]) {\r\n      thinnedValues.push(originalValues[originalValues.length-1])\r\n    }\r\n\r\n    return thinnedValues\r\n  }\r\n\r\n  const createChartData = (portfolioValues: PortfolioValue[]): ChartData => {\r\n    const labels: string[] = [];\r\n    const datasets: any[] = [];\r\n    const totalValues: number[] = [];\r\n    const cashValues: number[] = [];\r\n\r\n    portfolioValues = thinPortfolioValues(portfolioValues)\r\n\r\n    const stockValueMap: Map<string, number[]> = new Map();\r\n    for (let value of portfolioValues) {\r\n      for (let stockValue of value.stocks) {\r\n        const stockValues: number[] | undefined = stockValueMap.get(\r\n          stockValue.symbol\r\n        );\r\n        if (!stockValues) {\r\n          stockValueMap.set(stockValue.symbol, []);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let portfolioValue of portfolioValues) {\r\n      labels.push(formatDate(portfolioValue.date, false));\r\n      totalValues.push(portfolioValue.total);\r\n      cashValues.push(portfolioValue.cash);\r\n\r\n      stockValueMap.forEach((stockValues: number[], key: string) => {\r\n        let stockValue: number = NaN;\r\n        for (let stock of portfolioValue.stocks) {\r\n          if (stock.symbol.toUpperCase() === key.toUpperCase()) {\r\n            stockValue = stock.value;\r\n            break;\r\n          }\r\n        }\r\n        stockValues.push(stockValue);\r\n      });\r\n    }\r\n\r\n    datasets.push({\r\n      id: 1,\r\n      label: \"Total\",\r\n      data: totalValues,\r\n      pointRadius: POINT_RADIUS,\r\n      pointHoverRadius:POINT_HOVER_RADIUS,\r\n      borderColor: \"blue\"\r\n    });\r\n\r\n    datasets.push({\r\n      id: 2,\r\n      label: \"Cash\",\r\n      data: cashValues,\r\n      pointRadius: POINT_RADIUS,\r\n      pointHoverRadius:POINT_HOVER_RADIUS,\r\n      borderColor: \"green\",\r\n    });\r\n\r\n    let id: number = 3;\r\n\r\n\r\n    let colorId:number = 0;\r\n    stockValueMap.forEach((stockValues: number[], key: string) => {\r\n      const colorName:string = lineColors[colorId] \r\n      if (++colorId == lineColors.length)\r\n        colorId =0;\r\n      datasets.push({\r\n        id: id++,\r\n        label: key,\r\n        //@ts-ignore\r\n        data: stockValues,\r\n        pointRadius: POINT_RADIUS,\r\n        pointHoverRadius: POINT_HOVER_RADIUS,\r\n        borderColor: colorName,\r\n      });\r\n    });\r\n\r\n    const chartData: ChartData = {\r\n      labels,\r\n      datasets,\r\n    };\r\n    return chartData;\r\n  };\r\n\r\n  return (\r\n    <div className=\"Analysis\">\r\n      <header className=\"Analysis-header\" >\r\n        {chartData === undefined ? (\r\n          <div>\r\n            <Spin size=\"default\" />\r\n          </div>\r\n        ) : chartData.labels.length < 7 ? (\r\n          <Empty description=\"History unavailable for accounts created within the last week\"></Empty>\r\n        ) : (\r\n          //@ts-ignore\r\n          <Line datasetIdKey=\"1\" data={chartData} />\r\n        )}\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Analysis;\r\n","import { Form, Spin } from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getAccount, getUserInfo } from \"../APIService\";\r\nimport {\r\n  formatCurrency,\r\n  formatDate,\r\n  getAccountValue,\r\n  getGain,\r\n} from \"../Calculations\";\r\nimport { Account, UserInfo } from \"../types\";\r\nimport \"antd/dist/antd.css\";\r\n\r\nfunction Overview() {\r\n  const [account, setAccount] = useState<Account>();\r\n  const [userInfo, setUserInfo] = useState<UserInfo>();\r\n  const [loadingAccount, setLoadingUser] = useState<boolean>(false);\r\n  const [loadingUserInfo, setLoadingAccount] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    setLoadingAccount(true);\r\n    getUserInfo().then((foundUserInfo) => {\r\n      foundUserInfo && setUserInfo(foundUserInfo);\r\n      setLoadingAccount(false);\r\n      setLoadingUser(true);\r\n      getAccount().then((foundUser) => {\r\n        foundUser && setAccount(foundUser);\r\n        setLoadingUser(false);\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  const getAccountValueString = (account: Account): string => {\r\n    return formatCurrency(getAccountValue(account));\r\n  };\r\n\r\n  const getGainString = (account: Account): string => {\r\n    return formatCurrency(getGain(account));\r\n  };\r\n\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      span: 2,\r\n      offset: 0,\r\n    },\r\n    wrapperCol: {\r\n      span: 36,\r\n      offset: 1,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <br />\r\n      <Form name=\"overview\" {...formItemLayout}>\r\n        <Form.Item label=\"Name\" labelAlign=\"right\">\r\n          {loadingUserInfo || !userInfo ? (\r\n            <Spin size=\"small\" />\r\n          ) : (\r\n            <label>{userInfo.name}</label>\r\n          )}\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"User ID\" labelAlign=\"right\">\r\n          <span className=\"ant-form-text\">\r\n            {userInfo && !loadingUserInfo && userInfo.userID ? (\r\n              userInfo.userID\r\n            ) : (\r\n              <Spin size=\"small\" />\r\n            )}\r\n          </span>\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Account Created\" labelAlign=\"right\">\r\n          <span className=\"ant-form-text\">\r\n            {userInfo && !loadingUserInfo ? (\r\n              formatDate(userInfo.created, true)\r\n            ) : (\r\n              <Spin size=\"small\" />\r\n            )}\r\n          </span>\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Account Value\" labelAlign=\"right\">\r\n          <span className=\"ant-form-text\">\r\n            {!account || loadingAccount ? (\r\n              <Spin size=\"small\" />\r\n            ) : (\r\n              getAccountValueString(account)\r\n            )}\r\n          </span>\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Cash Balance\" labelAlign=\"right\">\r\n          <span className=\"ant-form-text\">\r\n            {userInfo && !loadingUserInfo ? (\r\n              formatCurrency(userInfo.cash)\r\n            ) : (\r\n              <Spin size=\"small\" />\r\n            )}\r\n          </span>\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Total Gain/Loss\" labelAlign=\"right\">\r\n          <span className=\"ant-form-text\">\r\n            {loadingAccount || !account ? (\r\n              <Spin size=\"small\" />\r\n            ) : (\r\n              <label\r\n                style={\r\n                  getGain(account) < 0 ? { color: \"red\" } : { color: undefined }\r\n                }\r\n              >\r\n                {getGainString(account)}\r\n              </label>\r\n            )}\r\n          </span>\r\n        </Form.Item>\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Overview;\r\n","import { useEffect, useState } from \"react\";\r\nimport { getAccount } from \"../APIService\";\r\nimport { Account } from \"../types\";\r\nimport { Spin, Table, TablePaginationConfig } from \"antd\";\r\nimport {\r\n  formatCurrency,\r\n  formatPercent,\r\n  getAccountValue,\r\n  getAssetValue,\r\n  getCostBasis,\r\n  getGainLoss,\r\n  getPercentOfAccount,\r\n  getQuantity,\r\n  parseCash,\r\n  parsePercent,\r\n} from \"../Calculations\";\r\n\r\ntype PositionRow = {\r\n  name: string;\r\n  symbol: string;\r\n  bid: string;\r\n  ask: string;\r\n  quantity: string;\r\n  costBasis: string;\r\n  currentValue: string;\r\n  percentOfAccount: string;\r\n  gain: string;\r\n  gainPercent: string;\r\n};\r\n\r\nfunction Positions() {\r\n  const [data, setData] = useState<PositionRow[] | undefined>();\r\n\r\n  useEffect(() => {\r\n    getAccount().then((foundUser) => {\r\n      if (foundUser) {\r\n        setData(calcData(foundUser));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const calcData = (user: Account): PositionRow[] => {\r\n    const data: PositionRow[] = [];\r\n    var totalBasis: number = 0;\r\n    var totalGain: number = 0;\r\n    for (var asset of user.assets) {\r\n      //console.log(\"pushing asset = \", JSON.stringify(asset))\r\n      totalGain += getGainLoss(asset);\r\n      totalBasis += getCostBasis(asset);\r\n      data.push({\r\n        name: asset.stock.name,\r\n        symbol: asset.stock.symbol,\r\n        // lastPrice: formatCurrency(\r\n        //   asset.stock.price.bid || asset.stock.price.previousClose\r\n        // ),\r\n        bid: formatCurrency(\r\n          asset.stock.price.bid || asset.stock.price.previousClose\r\n        ),\r\n        ask: formatCurrency(\r\n          asset.stock.price.ask || asset.stock.price.previousClose\r\n        ),\r\n        quantity: getQuantity(asset).toString(),\r\n        costBasis: formatCurrency(getCostBasis(asset)),\r\n        currentValue: formatCurrency(getAssetValue(asset)),\r\n        percentOfAccount: formatPercent(getPercentOfAccount(user, asset)),\r\n        gain: formatCurrency(getGainLoss(asset)),\r\n        gainPercent: formatPercent(getGainLoss(asset) / getCostBasis(asset)),\r\n      });\r\n    }\r\n    //@ts-ignore\r\n    data.push({\r\n      name: \"Cash\",\r\n      currentValue: formatCurrency(user.info.cash),\r\n      costBasis: formatCurrency(user.info.cash),\r\n      percentOfAccount: formatPercent(user.info.cash / getAccountValue(user)),\r\n    });\r\n\r\n    return data;\r\n  };\r\n\r\n  const columns: object[] = [\r\n    { title: \"Symbol\", dataIndex: \"symbol\", key: \"symbol\" },\r\n    { title: \"Asset\", dataIndex: \"name\", key: \"name\" },\r\n    { title: \"Quantity\", dataIndex: \"quantity\", key: \"quantity\" },\r\n    { title: \"Bid\", dataIndex: \"bid\", key: \"bid\" },\r\n    { title: \"Ask\", dataIndex: \"ask\", key: \"ask\" },\r\n    {\r\n      title: \"Current Value\",\r\n      dataIndex: \"currentValue\",\r\n      key: \"currentValue\",\r\n    },\r\n    { title: \"Cost Basis\", dataIndex: \"costBasis\", key: \"costBasis\" },\r\n\r\n    {\r\n      title: \"Percentage of Account\",\r\n      dataIndex: \"percentOfAccount\",\r\n      key: \"percentOfAccount\",\r\n    },\r\n    {\r\n      title: \"Total Gain/Loss\",\r\n      dataIndex: \"gain\",\r\n      key: \"gain\",\r\n      onCell: (record: any) => ({\r\n        style: {\r\n          color: (parseCash(record.gain) < 0) ? \"red\": \"black\",\r\n        }\r\n      })\r\n    },\r\n    {\r\n      title: \"Total Gain/Loss %\",\r\n      dataIndex: \"gainPercent\",\r\n      key: \"gainPercent\",\r\n      onCell: (record: any) => ({\r\n        style: {\r\n          color: (parsePercent(record.gainPercent) < 0) ? \"red\": \"black\",\r\n        }\r\n      })\r\n    },\r\n  ];\r\n\r\n  const tablePaginationConfig: TablePaginationConfig = {\r\n    pageSize: 100,\r\n  };\r\n\r\n  return (\r\n    <div className=\"Positions\">\r\n      <header className=\"Overview-header\">\r\n        {data === undefined ? (\r\n          <div>\r\n            <Spin size=\"default\" />\r\n          </div>\r\n        ) : (\r\n          <Table\r\n            dataSource={data}\r\n            columns={columns}\r\n            pagination={tablePaginationConfig}\r\n          />\r\n        )}\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Positions;\r\n","import { Divider, Form, Select } from \"antd\";\r\nimport { useState } from \"react\";\r\nimport Buy from \"../components/Buy\";\r\nimport Sell from \"../components/Sell\";\r\n\r\nenum TradeType {\r\n  BUY = \"BUY\",\r\n  SELL = \"SELL\",\r\n}\r\n\r\nfunction Trade() {\r\n  const [tradeType, setTradeType] = useState(TradeType.BUY);\r\n\r\n  const handleTradeType = (value: TradeType) => {\r\n    setTradeType(value)\r\n  };\r\n\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      span: 2,\r\n      offset: 0\r\n    },\r\n    wrapperCol: {\r\n      span: 2,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <br />\r\n      <Form name=\"trade\" {...formItemLayout}>\r\n        <Form.Item label=\"Trade Type\" labelAlign=\"left\">\r\n          <Select onChange={handleTradeType} defaultValue={TradeType.BUY} >\r\n            <Select.Option value={TradeType.BUY}>{TradeType.BUY}</Select.Option>\r\n            <Select.Option value={TradeType.SELL}>{TradeType.SELL}</Select.Option>\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n      <Divider orientation=\"left\" orientationMargin=\"0\">\r\n      {tradeType == TradeType.BUY? \"Buy Stock\" : \"Sell Stock\"}\r\n    </Divider>\r\n      {tradeType == TradeType.BUY ? <Buy /> : <Sell />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Trade;\r\n","import { Button, Form, Input, Spin } from \"antd\";\r\nimport { ChangeEvent, useEffect, useState, useRef } from \"react\";\r\nimport {\r\n  buyAsset,\r\n  BuyAssetResponse,\r\n  getCash,\r\n  getStockPrice,\r\n  lookupTicker,\r\n} from \"../APIService\";\r\nimport { formatCurrency } from \"../Calculations\";\r\nimport { COMMISSION } from \"../types\";\r\n\r\nconst PLEASE_ENTER_VALID_STOCK: string =\r\n  \"Please enter a valid stock ticker symbol\";\r\n\r\nexport default function Buy() {\r\n  const [typedSymbol, setTypedSymbol] = useState(\"\");\r\n  const [sharesToBuy, setSharesToBuy] = useState<number>(0);\r\n  const [askPrice, setAskPrice] = useState<number | null>(0);\r\n  const [totalCost, setTotalCost] = useState<number>(0);\r\n  const [shareCost, setShareCost] = useState<number>(0);\r\n  const [companyName, setCompanyName] = useState<string | null>(null);\r\n  const [cash, setCash] = useState<number>(0);\r\n  //const [loading, setLoading] = useState<boolean>(false);\r\n\r\n  const currentTypedSymbol = useRef<string>(\"\");\r\n  const [loadingStock, setLoadingStock] = useState<boolean>(false);\r\n  const [loadingPrice, setLoadingPrice] = useState<boolean>(false);\r\n\r\n  const handleTickerSymbol = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setTypedSymbol(e.target.value.toUpperCase());\r\n  };\r\n\r\n  const handleSharesToBuy = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const typedValue: string = e.target.value;\r\n    const shares: number = Number.parseInt(typedValue);\r\n    if (shares) setSharesToBuy(shares);\r\n    else setSharesToBuy(0);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getCash().then((userCash: number) => {\r\n      setCash(userCash);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoadingStock(true);\r\n    currentTypedSymbol.current = typedSymbol;\r\n    lookupTicker(typedSymbol)\r\n      .then((foundCompanyName: string | null) => {\r\n        if (typedSymbol === currentTypedSymbol.current) {\r\n          setLoadingStock(false);\r\n          setCompanyName(foundCompanyName);\r\n          if (foundCompanyName) {\r\n            setLoadingPrice(true);\r\n            getStockPrice(typedSymbol)\r\n              .then((foundPrice) => {\r\n                setLoadingPrice(false);\r\n                setAskPrice(foundPrice.ask);\r\n              })\r\n              .catch((ex: Error) => {\r\n                setLoadingPrice(false);\r\n              });\r\n          } else {\r\n            setAskPrice(null);\r\n          }\r\n          setLoadingStock(false);\r\n        }\r\n      })\r\n      .catch((ex: Error) => {\r\n        setLoadingStock(false);\r\n      });\r\n  }, [typedSymbol]);\r\n\r\n  useEffect(() => {\r\n    if (companyName != null && askPrice != null) {\r\n      const shareOnlyCost: number = sharesToBuy * askPrice;\r\n      setShareCost(shareOnlyCost);\r\n      setTotalCost(\r\n        shareOnlyCost > 0 ? shareOnlyCost + COMMISSION : shareOnlyCost\r\n      );\r\n    } else {\r\n      setShareCost(0);\r\n      setTotalCost(0);\r\n    }\r\n  }, [companyName, askPrice, sharesToBuy]);\r\n\r\n  const getForegroundColor = (): string => {\r\n    return !companyName ? \"red\" : \"black\";\r\n  };\r\n\r\n  const getCompanyText = (): string => {\r\n    const text: string = !companyName ? PLEASE_ENTER_VALID_STOCK : companyName;\r\n    //console.log(\"returning company text = \", {text});\r\n    return text;\r\n  };\r\n\r\n  const handlePurchase = async () => {\r\n    if (cash < totalCost) {\r\n      window.alert(\"You don't have enough cash for  that purchase \");\r\n      return;\r\n    }\r\n    if (companyName) {\r\n      const msg: string =\r\n        \"Please confirm purchase of \" +\r\n        sharesToBuy +\r\n        \" shares of \" +\r\n        companyName +\r\n        \" for a total of \" +\r\n        formatCurrency(totalCost) +\r\n        \".\";\r\n      const isOK: boolean = window.confirm(msg);\r\n      if (isOK) {\r\n        buyAsset(typedSymbol, sharesToBuy, askPrice || 0).then(\r\n          (buyAssetResponse: BuyAssetResponse) => {\r\n            const { successful, remainingCash } = buyAssetResponse;\r\n            if (successful) {\r\n              window.alert(\r\n                \"Purchase successful. New cash balance is \" +\r\n                  formatCurrency(remainingCash)\r\n              );\r\n              window.location.assign(\"/transactions\");\r\n              // console.log(\"showing historical prices *****************************************************\")\r\n            }\r\n          },\r\n          () => {\r\n            window.alert(\r\n              \"Purchase was not executed due to critical server error\"\r\n            );\r\n          }\r\n        );\r\n      }\r\n    } else {\r\n      window.alert(\"Purchase cancelled\");\r\n    }\r\n  };\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      span: 2,\r\n      offset: 0,\r\n    },\r\n    wrapperCol: {\r\n      span: 6,\r\n      offset: 1,\r\n    },\r\n  };\r\n\r\n  const tailLayout = {\r\n    wrapperCol: {\r\n      offset: 3,\r\n      span: 16,\r\n    },\r\n  };\r\n  return (\r\n    <Form name=\"buy\" {...formItemLayout}>\r\n      <Form.Item label=\"Stock\">\r\n        <Input \r\n          value={typedSymbol} \r\n          placeholder=\"Enter stock ticker symbol\"\r\n          onChange={handleTickerSymbol}\r\n        ></Input>\r\n        <>\r\n          {loadingStock ? (\r\n            <Spin size=\"small\" />\r\n          ) : (\r\n            <label\r\n              style={\r\n                !!typedSymbol && !!companyName\r\n                  ? { color: undefined }\r\n                  : { color: \"red\" }\r\n              }\r\n            >\r\n              {!typedSymbol\r\n                ? \"\"\r\n                : companyName\r\n                ? companyName\r\n                : \"Invalid ticker symbol\"}\r\n            </label>\r\n          )}{\" \"}\r\n        </>\r\n      </Form.Item>\r\n\r\n      <Form.Item label=\"Current Ask Price\">\r\n        {loadingPrice || loadingStock ? (\r\n          <Spin size=\"small\" />\r\n        ) : (\r\n          <label>{askPrice ? formatCurrency(askPrice) : \"Please enter a valid ticker symbol\"}</label>\r\n        )}\r\n      </Form.Item>\r\n\r\n      <Form.Item label=\"Shares to Buy\">\r\n        <Input\r\n          placeholder={\"Enter number of shares to buy\"}\r\n          onChange={handleSharesToBuy}\r\n          value={sharesToBuy === 0 ? undefined : sharesToBuy}\r\n        ></Input>\r\n      </Form.Item>\r\n\r\n      <Form.Item label=\"Commission\">\r\n        <label>{formatCurrency(COMMISSION)}</label>\r\n      </Form.Item>\r\n\r\n      <Form.Item label=\"Total Cost\">\r\n        {sharesToBuy > 0 && (loadingStock || loadingPrice) ? (\r\n          <Spin size=\"small\" />\r\n        ) : (\r\n          <label\r\n            style={totalCost > cash ? { color: \"red\" } : { color: undefined }}\r\n          >\r\n            {sharesToBuy > 0\r\n              ? formatCurrency(totalCost)\r\n              : \"Please enter the number of shares to buy\"}\r\n          </label>\r\n        )}\r\n      </Form.Item>\r\n\r\n      <Form.Item {...tailLayout}>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={handlePurchase}\r\n          disabled={\r\n            sharesToBuy === 0 ||\r\n            loadingPrice ||\r\n            loadingStock ||\r\n            !companyName ||\r\n            totalCost > cash\r\n          }\r\n        >\r\n          Submit\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n}\r\n","import { Button, Empty, Form, Input, Select, Spin } from \"antd\";\r\nimport { ChangeEvent, useEffect, useState } from \"react\";\r\nimport {\r\n  getAssets,\r\n  getShareCount,\r\n  getStockPrice,\r\n  sellAsset,\r\n} from \"../APIService\";\r\nimport { formatCurrency } from \"../Calculations\";\r\nimport { Asset, COMMISSION, SpotPrice } from \"../types\";\r\n\r\nexport default function Sell() {\r\n  const [assets, setAssets] = useState<Asset[] | undefined>(undefined);\r\n  const [loadingAssets, setLoadingAssets] = useState<boolean>(false);\r\n  const [asset, setAsset] = useState<Asset | undefined>(undefined);\r\n  const [sharesToSell, setSharesToSell] = useState(0);\r\n  const [price, setPrice] = useState<SpotPrice>({\r\n    bid: 0,\r\n    ask: 0,\r\n    previousClose: 0,\r\n  });\r\n\r\n  const [loadingPrice, setLoadingPrice] = useState<boolean>(false);\r\n\r\n  const handleAssetChange = (value: string) => {\r\n    if (assets && value) {\r\n      const foundAsset: Asset | undefined = assets.find(\r\n        (currAsset) =>\r\n          currAsset.stock.symbol.toUpperCase() === value.toUpperCase()\r\n      );\r\n      if (foundAsset) {\r\n        setAsset(foundAsset);\r\n        setSharesToSell(0);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSharesToSell = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const typedValue: string = e.target.value;\r\n    const shares: number = Number.parseInt(typedValue);\r\n    if (shares) setSharesToSell(shares);\r\n    else setSharesToSell(0);\r\n  };\r\n\r\n  const handleSale = async () => {\r\n    if (sharesToSell > getShareCount(asset)) {\r\n      window.alert(\"Insufficient shares for this sale\");\r\n      return;\r\n    }\r\n\r\n    if (asset) {\r\n      const totalCost: number = price.bid * sharesToSell - COMMISSION;\r\n      const msg: string =\r\n        \"Please confirm sale of \" +\r\n        sharesToSell +\r\n        \" shares of \" +\r\n        asset.stock.name +\r\n        \" for a total of \" +\r\n        formatCurrency(totalCost) +\r\n        \".\";\r\n      const isOK: boolean = window.confirm(msg);\r\n\r\n      if (isOK) {\r\n        const response = await sellAsset(\r\n          asset.stock.symbol,\r\n          sharesToSell,\r\n          price.bid || 0\r\n        );\r\n        if (response) {\r\n          window.alert(\r\n            \"Sale confirmed. New cash balance is \" +\r\n              formatCurrency(response.remainingCash)\r\n          );\r\n          window.location.assign(\"/\");\r\n        } else {\r\n          window.alert(\"Sale failed: \" + response);\r\n        }\r\n      } else alert(\"Sale cancelled\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setLoadingAssets(true);\r\n    getAssets().then((foundAssets) => {\r\n      setAssets(foundAssets);\r\n      setLoadingAssets(false);\r\n      if (foundAssets && foundAssets.length > 0) setAsset(foundAssets[0]);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (asset) {\r\n      setLoadingPrice(true);\r\n      setSharesToSell(0);\r\n\r\n      getStockPrice(asset.stock.symbol).then((foundPrice) => {\r\n        setPrice(foundPrice);\r\n        setLoadingPrice(false);\r\n      });\r\n    }\r\n  }, [asset]);\r\n\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      span: 2,\r\n      offset: 0,\r\n    },\r\n    wrapperCol: {\r\n      span: 6,\r\n      offset: 1,\r\n    },\r\n  };\r\n  const tailLayout = {\r\n    wrapperCol: {\r\n      offset: 3,\r\n      span: 16,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loadingAssets ? (\r\n        <Spin size=\"large\" />\r\n      ) : !assets || assets.length == 0 ? (\r\n        <Empty description=\"You do not have any stocks to sell\"></Empty>\r\n      ) : (\r\n        <Form name=\"sell\" {...formItemLayout}>\r\n          <Form.Item label=\"Stock\">\r\n            <Select\r\n              onChange={handleAssetChange}\r\n              defaultValue={assets[0].stock.symbol}\r\n              value={asset?.stock.symbol}\r\n            >\r\n              {assets.map((currAsset) => {\r\n                return (\r\n                  <Select.Option value={currAsset.stock.symbol}>\r\n                    {currAsset.stock.name +\r\n                      \"  (\" +\r\n                      currAsset.stock.symbol +\r\n                      \")\"}\r\n                  </Select.Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </Form.Item>\r\n\r\n          <Form.Item label=\"Current Bid Price\">\r\n            {loadingPrice ? (\r\n              <Spin size=\"small\" />\r\n            ) : (\r\n              <label> {formatCurrency(price.bid)}</label>\r\n            )}\r\n          </Form.Item>\r\n\r\n          <Form.Item label=\"Shares to Sell\">\r\n            <Input\r\n              placeholder={\r\n                asset\r\n                  ? \"\" +\r\n                    getShareCount(asset) +\r\n                    \" shares of \" +\r\n                    asset.stock.symbol +\r\n                    \" available to sell\"\r\n                  : \"Enter number of shares to sell\"\r\n              }\r\n              onChange={handleSharesToSell}\r\n              value={sharesToSell == 0 ? undefined : sharesToSell}\r\n              style={\r\n                sharesToSell > getShareCount(asset)\r\n                  ? { color: \"red\" }\r\n                  : { color: undefined }\r\n              }\r\n            ></Input>\r\n          </Form.Item>\r\n\r\n          <Form.Item label=\"Commission\">\r\n            <label>{formatCurrency(COMMISSION)}</label>\r\n          </Form.Item>\r\n\r\n          <Form.Item label=\"Net Proceeds\">\r\n            {loadingPrice && sharesToSell > 0 ? (\r\n              <Spin size=\"small\" />\r\n            ) : (\r\n              <label>\r\n                {sharesToSell > getShareCount(asset)\r\n                  ? \"You may sell a maximum of \" +\r\n                    getShareCount(asset) +\r\n                    \" shares of \" +\r\n                    asset?.stock.symbol\r\n                  : sharesToSell == 0\r\n                  ? \"Please enter the number of shares to sell\"\r\n                  : sharesToSell > 0\r\n                  ? formatCurrency(price.bid * sharesToSell - COMMISSION)\r\n                  : 0}\r\n              </label>\r\n            )}\r\n          </Form.Item>\r\n\r\n          <Form.Item {...tailLayout}>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={handleSale}\r\n              disabled={\r\n                !asset ||\r\n                !price ||\r\n                sharesToSell <= 0 ||\r\n                sharesToSell > getShareCount(asset)\r\n              }\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { getTransactions } from \"../APIService\";\r\nimport { Transaction, TransactionType, Account } from \"../types\";\r\nimport { Spin, Table, TablePaginationConfig } from \"antd\";\r\nimport { calcSharePrice, formatCurrency, formatDate } from \"../Calculations\";\r\n\r\ntype TransactionRow = {\r\n  date: string;\r\n  description: string;\r\n  amount: string;\r\n  cash: string;\r\n};\r\n\r\nfunction Transactions() {\r\n  const [data, setData] = useState<TransactionRow[] | undefined>();\r\n\r\n  useEffect(() => {\r\n    getTransactions().then((transactions) => {\r\n      setData(calcData(transactions));\r\n    });\r\n  }, []);\r\n\r\n  const calcData = (transactions: Transaction[]): TransactionRow[] => {\r\n    const rows: TransactionRow[] = [];\r\n    for (var transaction of transactions) {\r\n      rows.push({\r\n        date: formatDate(transaction.date, true),\r\n        description: createDescription(transaction),\r\n        amount: transaction.amount? formatCurrency(transaction.amount) : formatCurrency(0),\r\n        cash: formatCurrency(transaction.cash),\r\n      });\r\n    }\r\n    return rows;\r\n  };\r\n\r\n  const createDescription = (transaction: Transaction) => {\r\n    var description: string = \"\";\r\n\r\n    switch (transaction.type) {\r\n      case TransactionType.BUY:\r\n        description =\r\n          \"Buy \" +\r\n          transaction.shares +\r\n          \" of \" +\r\n          transaction.name +\r\n          \" (\" +\r\n          transaction.symbol +\r\n          \") at \" +\r\n          formatCurrency(calcSharePrice(transaction))\r\n        break;\r\n\r\n      case TransactionType.DIVIDEND:\r\n        description =\r\n          \"Dividend on \" +\r\n          transaction.shares +\r\n          \" shares of \" +\r\n          transaction.name +\r\n          \" (\" +\r\n          transaction.symbol +\r\n          \")\";\r\n        break;\r\n\r\n      case TransactionType.GIFT:\r\n        description = \"Initial Deposit\";\r\n        break;\r\n      case TransactionType.SELL:\r\n        description =\r\n          \"Sell \" +\r\n          transaction.shares +\r\n          \" of \" +\r\n          transaction.name +\r\n          \" (\" +\r\n          transaction.symbol +\r\n          \") at \" +\r\n          formatCurrency(calcSharePrice(transaction))\r\n        break;\r\n      case TransactionType.SPLIT:\r\n        description = transaction.symbol + \" \" + transaction.to + \"-for-\" + transaction.from + \" Stock Split\"\r\n        break;\r\n      default:\r\n        console.log(\"This is transaction type: \" + transaction.type);\r\n        description = \"There is no describing this transaction\";\r\n        break;\r\n    }\r\n\r\n    //console.log(\"Description for \", transaction, \" -> \", description);\r\n    return description;\r\n  };\r\n\r\n  const columns: object[] = [\r\n    { title: \"Date\", dataIndex: \"date\", key: \"date\" },\r\n    { title: \"Description\", dataIndex: \"description\", key: \"description\" },\r\n    { title: \"Amount\", dataIndex: \"amount\", key: \"amount\" },\r\n    { title: \"Cash Balance\", dataIndex: \"cash\", key: \"cash\" },\r\n  ];\r\n\r\n  const tablePaginationConfig:TablePaginationConfig = {\r\n    pageSize : 100\r\n  }\r\n\r\n  return (\r\n    <div className=\"Transactions\">\r\n      <header className=\"Transactions-header\"></header>\r\n      {data === undefined ? (\r\n        <Spin size = \"default\" />\r\n      ) : (\r\n        <Table \r\n        dataSource={data} \r\n        columns={columns} \r\n        pagination={tablePaginationConfig}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Transactions;\r\n","import { Button, Tabs } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\nimport { doLogout } from \"../APIService\";\r\nimport Analysis from \"./Analysis\";\r\nimport Overview from \"./Overview\";\r\nimport Positions from \"./Positions\";\r\nimport Trade from \"./Trade\";\r\nimport Transactions from \"./Transactions\";\r\n\r\nconst { TabPane } = Tabs;\r\n\r\nconst handleLogout = () => {\r\n  const isOK: boolean = window.confirm(\"OK to Log Out?\");\r\n  if (!isOK) return;\r\n  doLogout();\r\n  window.location.assign(\"/login\");\r\n};\r\nconst logoutButton = (\r\n  <Button type=\"primary\" onClick={handleLogout}>\r\n    Logout\r\n  </Button>\r\n);\r\n\r\nconst style = {\r\n  \r\n}\r\n\r\nfunction NavPane() {\r\n  return (\r\n    <Tabs style={{\r\n    paddingTop: '5px',\r\n    paddingLeft: '10px',\r\n    paddingRight: '5px',\r\n    boxSizing: 'content-box',\r\n  }} tabBarExtraContent={logoutButton}\r\n  tabPosition='top'\r\n  type='card'\r\n  >\r\n      <TabPane tab=\"Overview\" key=\"1\">\r\n        <Overview />\r\n      </TabPane>\r\n      <TabPane tab=\"Positions\" key=\"2\">\r\n        <Positions />\r\n      </TabPane>\r\n      <TabPane tab=\"Transactions\" key=\"3\">\r\n        <Transactions />\r\n      </TabPane>\r\n      <TabPane tab=\"Analysis\" key=\"4\">\r\n        <Analysis />\r\n      </TabPane>\r\n      <TabPane tab=\"Trade\" key=\"5\">\r\n        <Trade />\r\n      </TabPane>\r\n    </Tabs>\r\n  );\r\n}\r\n\r\nexport default NavPane;\r\n","\r\nimport { Button, Form, Input } from \"antd\";\r\nimport { doSignup } from \"../APIService\";\r\n\r\nfunction SignUp() {\r\n  const handleSignUpButtonClick = (values: any) => {\r\n    doSignup(values.userID, values.password, values.name).then(\r\n      (response: {success: boolean, message:string}) => {\r\n        if (response.success) {\r\n          window.location.assign(\"/login\");\r\n          window.alert(\r\n            \"Welcome, \" +\r\n              values.name +\r\n              \". Your account was successfully created.\"\r\n          );\r\n        } else {\r\n          window.alert(\"Error creating account : \" + response.message);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      span: 2,\r\n      offset: 0,\r\n    },\r\n    wrapperCol: {\r\n      span: 10,\r\n      offset: 1,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <Form name=\"signup\" {...formItemLayout} onFinish={handleSignUpButtonClick}>\r\n      <Form.Item\r\n        label=\"Name\"\r\n        name=\"name\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Please input your name\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input placeholder=\"Fred Smith\" />\r\n      </Form.Item>\r\n      <Form.Item\r\n        label=\"User ID\"\r\n        name=\"userID\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Please input your user ID\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input placeholder=\"stock-market-whiz\" />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"Password\"\r\n        name=\"password\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Please input your password\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input.Password autoComplete=\"new-password\" />\r\n      </Form.Item>\r\n      <Form.Item\r\n        wrapperCol={{\r\n          offset: 8,\r\n          span: 3,\r\n        }}\r\n      >\r\n        <Button type=\"primary\" htmlType=\"submit\">\r\n          Sign Up\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default SignUp;\r\n","import Login from \"./scenes/Login\";\r\nimport Header from \"./components/Header\";\r\n\r\nimport {isLoggedIn } from \"./APIService\";\r\nimport NavPane from \"./scenes/NavPane\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport SignUp from \"./scenes/SignUp\";\r\nimport { Helmet as ReactHelmet } from \"react-helmet\";\r\n\r\nexport default function App() {\r\n  return (\r\n    <div>\r\n     \r\n    <Router>\r\n      <div>\r\n      <ReactHelmet >\r\n      <title>Investment Simulator</title>\r\n        </ReactHelmet>\r\n        <Header />\r\n        <br/>\r\n        <Switch>\r\n          <Route path=\"/signup\">\r\n            <SignUp />\r\n          </Route>\r\n          <Route path=\"/login\">\r\n            {!isLoggedIn() ? (\r\n              <Login/>\r\n            ) : (\r\n              <NavPane />\r\n            )}\r\n          </Route>\r\n      \r\n          <Route path=\"/\">\r\n            {!isLoggedIn() ? (\r\n              <Login/>\r\n            ) : (\r\n              <NavPane />\r\n            )}\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n    </div>\r\n  );\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}