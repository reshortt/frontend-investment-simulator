(this["webpackJsonpinvestment-simulator"]=this["webpackJsonpinvestment-simulator"]||[]).push([[0],{197:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(55),c=n.n(s),o=(n(197),n(27)),i=n(188),u=n(282),l=n(185),b=n(177),j=n(76),d=n(18),p=n.n(d),f=n(40),h="AUTH_TOKEN_KEY",m="USER_NAME",x="USER_ID",O=n(56),v=n.n(O),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=""+e,a=new URLSearchParams(t).toString();return n+"?"+a},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET";return{method:e,headers:{authorization:"Bearer ".concat(sessionStorage.getItem(h))}}},k=function(){return!!sessionStorage.getItem(h)},w=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){var r,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:t,password:n,name:a})},e.next=3,v()(g("/API/signup"),r);case 3:if(s=e.sent,200!==s.status){e.next=9;break}return e.abrupt("return",{success:!0,message:""});case 9:return e.next=11,s.json();case 11:return c=e.sent,console.log("Signup failed: "+c.message),e.abrupt("return",{success:!1,message:c.message});case 14:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:t,password:n})},e.next=3,v()(g("/API/login"),a);case 3:r=e.sent,e.t0=r.status,e.next=200===e.t0?7:401===e.t0||400===e.t0?15:16;break;case 7:return e.next=9,r.json();case 9:return s=e.sent,sessionStorage.setItem(h,s.token),sessionStorage.setItem(m,s.userName),sessionStorage.setItem(x,s.userID),console.log("Successful login: "+s),e.abrupt("return",!0);case 15:case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.next=3,v()(g("/API/getAccount"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",null);case 17:return console.log("unexpected getAccount response"),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.next=3,v()(g("/API/getUserInfo"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",null);case 17:return console.log("unexpected getUser response"),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.next=3,v()(g("/API/getAssets"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?12:18;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,console.log("Assets retrieved: "+a.assets),e.abrupt("return",a.assets);case 12:return e.t1=console,e.next=15,n.json();case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 18:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.next=3,v()(g("/API/getTransactions"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a.transactions);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 17:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.next=3,v()(g("/API/getCash"),t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a.cash);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 17:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Looking up ticker: "+t+"......."),n=y(),a=g("/API/lookupTicker",{tickerSymbol:t}),e.next=5,v()(a,n);case 5:r=e.sent,console.log("ticker lookup: ",r.status," - ",r.json),e.t0=r.status,e.next=200===e.t0?10:400===e.t0?14:15;break;case 10:return e.next=12,r.text();case 12:return s=e.sent,e.abrupt("return",s);case 14:return e.abrupt("return",null);case 15:return console.log("unexpected lookupTicker response"),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function E(e,t){return L.apply(this,arguments)}function L(){return(L=Object(f.a)(p.a.mark((function e(t,n){var a,r,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y(),r=g("/API/getHistoricalPrices",{ticker:t,date:n.toDateString()}),console.log("Getting  historical prices for ",t," with URL=",r),e.next=5,v()(r,a);case 5:s=e.sent,e.t0=s.status,e.next=200===e.t0?9:13;break;case 9:return e.next=11,s.json();case 11:return c=e.sent,e.abrupt("return",c);case 13:return console.log("unexpected buyAsset response"),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){var r,s,c,o,i,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y(),s=n.toString(),c=a.toString(),o=g("/API/buyAsset",{tickerSymbol:t,shares:s,price:c}),e.next=6,v()(o,r);case 6:i=e.sent,e.t0=i.status,e.next=200===e.t0?10:15;break;case 10:return e.next=12,i.json();case 12:return u=e.sent,l=u.cash,e.abrupt("return",{successful:!0,remainingCash:l});case 15:return console.log("unexpected buyAsset response"),e.abrupt("return",{successful:!1,remainingCash:0});case 17:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){var r,s,c,o,i,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y(),s=n.toString(),c=a.toString(),o=g("/API/sellAsset",{tickerSymbol:t,shares:s,price:c}),e.next=6,v()(o,r);case 6:i=e.sent,console.log("response: ",i.status),e.t0=i.status,e.next=200===e.t0?11:16;break;case 11:return e.next=13,i.json();case 13:return u=e.sent,l=u.cash,e.abrupt("return",{successful:!0,remainingCash:l});case 16:return console.log("unexpected getAssets response"),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y(),a=g("/API/getStockPrice",{tickerSymbol:t}),e.next=4,v()(a,n);case 4:return r=e.sent,e.next=7,r.json();case 7:s=e.sent,console.log("Get Stock Price Response:: ",s),e.t0=r.status,e.next=200===e.t0?12:401===e.t0?13:19;break;case 12:return e.abrupt("return",s);case 13:return e.t1=console,e.next=16,r.json();case 16:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",s);case 19:return console.log("unexpected getAssets response"),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=0;return e?(e.lots.map((function(e){t+=e.shares})),t):0},z=(n(150),n(5));var Y=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(z.jsxs)(u.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(e){r(!0),I(e.username,e.password).then((function(e){r(!1),e?C().then((function(e){i.b.success("User "+(null===e||void 0===e?void 0:e.name)+" successfully logged in",1).then((function(){window.location.assign("/")}))})):i.b.error("Invalid credentials")}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(z.jsx)(u.a.Item,{label:"User name",name:"username",rules:[{required:!0,message:"Please input your username"}],children:Object(z.jsx)(l.a,{})}),Object(z.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(z.jsx)(l.a.Password,{})}),Object(z.jsx)(u.a.Item,{wrapperCol:{offset:8,span:16},children:n||k()?Object(z.jsx)(b.a,{size:"small"}):Object(z.jsx)(j.a,{type:"primary",htmlType:"submit",children:"Login"})}),Object(z.jsxs)(u.a.Item,{wrapperCol:{offset:8,span:16},children:[Object(z.jsx)("label",{children:"No Account? "}),Object(z.jsx)(j.a,{type:"link",onClick:function(){window.location.assign("/signup")},children:"Sign Up"})]})]})},M=n.p+"static/media/stocks.0f6444bc.png";function R(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){k()&&!n&&C().then((function(e){e&&r(e)}))})),Object(z.jsxs)("div",{style:{padding:"20px 10px 50px",fontSize:"16px",width:"100%",height:"60px",backgroundColor:"green"},children:[Object(z.jsx)("img",{src:M,width:"24",height:"24",style:{verticalAlign:"middle"}}),Object(z.jsxs)("label",{style:{color:"white",font:"Arial",textAlign:"center",verticalAlign:"bottom",paddingLeft:"10px"},children:[n?" Investment Simulator - "+n.name:" Investment Simulator"," "]})]})}var V,G=n(280),q=n(17),H=n(58),J=n(191),K=n(281);!function(e){e.GIFT="GIFT",e.BUY="BUY",e.SELL="SELL",e.DIVIDEND="DIVIDEND",e.SPLIT="SPLIT"}(V||(V={}));var _=function(e){var t,n=0,a=Object(q.a)(e.lots);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=r.basis*r.shares}}catch(s){a.e(s)}finally{a.f()}return n},$=function(e){var t,n=0,a=Object(q.a)(e.lots);try{for(a.s();!(t=a.n()).done;){n+=t.value.shares}}catch(r){a.e(r)}finally{a.f()}return n},Q=function(e){return $(e)*(e.stock.price.bid||e.stock.price.previousClose||0)},W=function(e){return X(e)-1e6},X=function(e){var t,n=0,a=Object(q.a)(e.assets);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=Q(r)}}catch(s){a.e(s)}finally{a.f()}return n+e.info.cash},Z=function(e,t){return Q(t)/X(e)},ee=function(e){return Q(e)-_(e)},te=function(e){return"$"+new Intl.NumberFormat("en-us",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},ne=function(e){return new Intl.NumberFormat("en-us",{minimumFractionDigits:2,maximumFractionDigits:2}).format(100*e)+"%"},ae=function(e,t){var n=new Date(e);if(!Object(J.a)(n))return"";var a=t?"MMMM dd, yyyy":"yyyy-MM-dd";return Object(K.a)(n,a)};function re(e,t){var n=[];t.setHours(0,0,0,0);var a,r=Object(q.a)(e);try{for(r.s();!(a=r.n()).done;){var s=a.value,c=new Date(s.date);if(c.setHours(0,0,0,0),c>t)break;c.getTime()===t.getTime()&&n.push(s)}}catch(o){r.e(o)}finally{r.f()}return n}function se(e,t){var n,a=e.shares,r=Object(q.a)(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.type===V.SPLIT&&s.symbol.toUpperCase()===e.symbol.toUpperCase()&&s.date>e.date&&(a*=s.to/s.from)}}catch(c){r.e(c)}finally{r.f()}return a}function ce(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(f.a)(p.a.mark((function e(t){var n,a,r,s,c,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new Map,a=[],r=0,s=new Date(t[0].date),(c=new Date(Date.now())).setDate(c.getDate()-1),o=function(e){var s,c=re(t,e),o=Object(q.a)(c);try{for(o.s();!(s=o.n()).done;){var i=s.value;switch(i.type){case V.BUY:var u=n.get(i.symbol),l=se(i,t);void 0!==u?u+=l:u=l,n.set(i.symbol,u),r-=i.amount;break;case V.DIVIDEND:r+=i.amount;break;case V.SELL:var b=n.get(i.symbol),j=se(i,t);void 0!==b?b-=j:(console.log("******** Error - sold shares that were not owned"),b=0),n.set(i.symbol,b),r+=i.amount;break;case V.GIFT:r+=i.amount}}}catch(p){o.e(p)}finally{o.f()}var d=[];n.forEach((function(e,t){void 0!==e&&e>0&&d.push({shares:e,symbol:t})})),a.push({cash:r,date:new Date(e),positions:d})},i=s;i<c;i.setDate(i.getDate()+1))o(i);return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=new Map,ue=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=ie.get(t))){e.next=3;break}return e.abrupt("return",a);case 3:return e.next=5,E(t,n);case 5:return a=e.sent,ie.set(t,a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a,r,s,c,o,i,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t,n);case 2:if(a=e.sent,r=a.length>2?Math.abs(new Date(a[0].date).getTime()-new Date(n).getTime()):void 0,s=a.length>2?Math.abs(new Date(a[a.length-1].date).getTime()-new Date(n).getTime()):void 0,!(r&&s&&r>s)){e.next=17;break}c=a.length-1;case 7:if(!(c>=0)){e.next=15;break}if(o=a[c],!(new Date(o.date)<=n)){e.next=12;break}return e.abrupt("return",o.price);case 12:--c,e.next=7;break;case 15:e.next=35;break;case 17:i=Object(q.a)(a),e.prev=18,i.s();case 20:if((u=i.n()).done){e.next=27;break}if(l=u.value,!(new Date(l.date)>=n)){e.next=25;break}return e.abrupt("return",l.price);case 25:e.next=20;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(18),i.e(e.t0);case 32:return e.prev=32,i.f(),e.finish(32);case 35:return console.log(t,"price on ",n,": ",0),e.abrupt("return",0);case 37:case"end":return e.stop()}}),e,null,[[18,29,32,35]])})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,s,c,o,i,u,l,b,j,d,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,ce(t);case 3:a=e.sent,r=Object(q.a)(a),e.prev=5,r.s();case 7:if((s=r.n()).done){e.next=37;break}c=s.value,o=0,i=new Date(c.date),u=[],l=Object(q.a)(c.positions),e.prev=13,l.s();case 15:if((b=l.n()).done){e.next=25;break}return j=b.value,e.next=19,le(j.symbol,i);case 19:d=e.sent,f={symbol:j.symbol,value:j.shares*d},u.push(f),o+=f.value;case 23:e.next=15;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(13),l.e(e.t0);case 30:return e.prev=30,l.f(),e.finish(30);case 33:o+=c.cash,n.push({date:i,cash:c.cash,total:o,stocks:u});case 35:e.next=7;break;case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(5),r.e(e.t1);case 42:return e.prev=42,r.f(),e.finish(42);case 45:return ie.clear(),e.abrupt("return",n);case 47:case"end":return e.stop()}}),e,null,[[5,39,42,45],[13,27,30,33]])})));return function(t){return e.apply(this,arguments)}}(),je=function(e){return e.type===V.BUY?(e.amount-e.commission)/e.shares:(e.amount+e.commission)/e.shares},de=n(77),pe=n(189),fe=n(59);fe.c.register.apply(fe.c,Object(H.a)(fe.j));var he=["cadetblue","darkorchid","cornflowerblue","indigo","olive","darkseagreen","darkmagenta"];var me=function(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){P().then((function(e){be(e).then((function(e){var t=s(e);r(t)}))}))}),[]);var s=function(e){var t=[],n=[],a=[],r=[];e=function(e){if(e.length<100)return e;for(var t=[],n=e.length/100,a=0;a<e.length;a+=n){var r=Math.floor(a);t.push(e[r])}return t[t.length-1]!=e[e.length-1]&&t.push(e[e.length-1]),t}(e);var s,c=new Map,o=Object(q.a)(e);try{for(o.s();!(s=o.n()).done;){var i,u=s.value,l=Object(q.a)(u.stocks);try{for(l.s();!(i=l.n()).done;){var b=i.value;c.get(b.symbol)||c.set(b.symbol,[])}}catch(m){l.e(m)}finally{l.f()}}}catch(m){o.e(m)}finally{o.f()}var j,d=Object(q.a)(e);try{var p=function(){var e=j.value;t.push(ae(e.date,!1)),a.push(e.total),r.push(e.cash),c.forEach((function(t,n){var a,r=NaN,s=Object(q.a)(e.stocks);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.symbol.toUpperCase()===n.toUpperCase()){r=c.value;break}}}catch(m){s.e(m)}finally{s.f()}t.push(r)}))};for(d.s();!(j=d.n()).done;)p()}catch(m){d.e(m)}finally{d.f()}n.push({id:1,label:"Total",data:a,pointRadius:3,pointHoverRadius:6,borderColor:"blue"}),n.push({id:2,label:"Cash",data:r,pointRadius:3,pointHoverRadius:6,borderColor:"green"});var f=3,h=0;return c.forEach((function(e,t){var a=he[h];++h==he.length&&(h=0),n.push({id:f++,label:t,data:e,pointRadius:3,pointHoverRadius:6,borderColor:a})})),{labels:t,datasets:n}};return Object(z.jsx)("div",{className:"Analysis",children:Object(z.jsx)("header",{className:"Analysis-header",children:void 0===n?Object(z.jsx)("div",{children:Object(z.jsx)(b.a,{size:"default"})}):n.labels.length<7?Object(z.jsx)(de.a,{description:"History unavailable for accounts created within the last week"}):Object(z.jsx)(pe.a,{datasetIdKey:"1",data:n})})})},xe=n(35);var Oe=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(),c=Object(o.a)(s,2),i=c[0],l=c[1],j=Object(a.useState)(!1),d=Object(o.a)(j,2),p=d[0],f=d[1],h=Object(a.useState)(!1),m=Object(o.a)(h,2),x=m[0],O=m[1];return Object(a.useEffect)((function(){O(!0),C().then((function(e){e&&l(e),O(!1),f(!0),S().then((function(e){e&&r(e),f(!1)}))}))}),[]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("br",{}),Object(z.jsxs)(u.a,Object(xe.a)(Object(xe.a)({name:"overview"},{labelCol:{span:2,offset:0},wrapperCol:{span:36,offset:1}}),{},{children:[Object(z.jsx)(u.a.Item,{label:"Name",labelAlign:"right",children:x||!i?Object(z.jsx)(b.a,{size:"small"}):Object(z.jsx)("label",{children:i.name})}),Object(z.jsx)(u.a.Item,{label:"User ID",labelAlign:"right",children:Object(z.jsx)("span",{className:"ant-form-text",children:i&&!x&&i.userID?i.userID:Object(z.jsx)(b.a,{size:"small"})})}),Object(z.jsx)(u.a.Item,{label:"Account Created",labelAlign:"right",children:Object(z.jsx)("span",{className:"ant-form-text",children:i&&!x?ae(i.created,!0):Object(z.jsx)(b.a,{size:"small"})})}),Object(z.jsx)(u.a.Item,{label:"Account Value",labelAlign:"right",children:Object(z.jsx)("span",{className:"ant-form-text",children:!n||p?Object(z.jsx)(b.a,{size:"small"}):function(e){return te(X(e))}(n)})}),Object(z.jsx)(u.a.Item,{label:"Cash Balance",labelAlign:"right",children:Object(z.jsx)("span",{className:"ant-form-text",children:i&&!x?te(i.cash):Object(z.jsx)(b.a,{size:"small"})})}),Object(z.jsx)(u.a.Item,{label:"Total Gain/Loss",labelAlign:"right",children:Object(z.jsx)("span",{className:"ant-form-text",children:p||!n?Object(z.jsx)(b.a,{size:"small"}):Object(z.jsx)("label",{style:W(n)<0?{color:"red"}:{color:void 0},children:function(e){return te(W(e))}(n)})})})]}))]})},ve=n(279);var ge,ye=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){S().then((function(e){e&&r(s(e))}))}),[]);var s=function(e){var t,n=[],a=Object(q.a)(e.assets);try{for(a.s();!(t=a.n()).done;){var r=t.value;ee(r),_(r),n.push({name:r.stock.name,symbol:r.stock.symbol,bid:te(r.stock.price.bid||r.stock.price.previousClose),ask:te(r.stock.price.ask||r.stock.price.previousClose),quantity:$(r).toString(),costBasis:te(_(r)),currentValue:te(Q(r)),percentOfAccount:ne(Z(e,r)),gain:te(ee(r)),gainPercent:ne(ee(r)/_(r))})}}catch(s){a.e(s)}finally{a.f()}return n.push({name:"Cash",currentValue:te(e.info.cash),costBasis:te(e.info.cash),percentOfAccount:ne(e.info.cash/X(e))}),n},c=[{title:"Symbol",dataIndex:"symbol",key:"symbol"},{title:"Asset",dataIndex:"name",key:"name"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Bid",dataIndex:"bid",key:"bid"},{title:"Ask",dataIndex:"ask",key:"ask"},{title:"Current Value",dataIndex:"currentValue",key:"currentValue"},{title:"Cost Basis",dataIndex:"costBasis",key:"costBasis"},{title:"Percentage of Account",dataIndex:"percentOfAccount",key:"percentOfAccount"},{title:"Total Gain/Loss",dataIndex:"gain",key:"gain",onCell:function(e){return{style:{color:(t=e.gain,(t?(t=t.replace("$",""),parseFloat(t)):0)<0?"red":"black")}};var t}},{title:"Total Gain/Loss %",dataIndex:"gainPercent",key:"gainPercent",onCell:function(e){return{style:{color:(t=e.gainPercent,(t?(t=t.replace("%",""),parseFloat(t)):0)<0?"red":"black")}};var t}}];return Object(z.jsx)("div",{className:"Positions",children:Object(z.jsx)("header",{className:"Overview-header",children:void 0===n?Object(z.jsx)("div",{children:Object(z.jsx)(b.a,{size:"default"})}):Object(z.jsx)(ve.a,{dataSource:n,columns:c,pagination:{pageSize:100}})})})},ke=n(114),we=n(278);function Ie(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),c=Object(o.a)(s,2),i=c[0],d=c[1],h=Object(a.useState)(0),m=Object(o.a)(h,2),x=m[0],O=m[1],v=Object(a.useState)(0),g=Object(o.a)(v,2),y=g[0],k=g[1],w=Object(a.useState)(0),I=Object(o.a)(w,2),S=(I[0],I[1]),C=Object(a.useState)(null),A=Object(o.a)(C,2),P=A[0],E=A[1],L=Object(a.useState)(0),N=Object(o.a)(L,2),F=N[0],Y=N[1],M=Object(a.useRef)(""),R=Object(a.useState)(!1),V=Object(o.a)(R,2),G=V[0],q=V[1],H=Object(a.useState)(!1),J=Object(o.a)(H,2),K=J[0],_=J[1];Object(a.useEffect)((function(){D().then((function(e){Y(e)}))}),[]),Object(a.useEffect)((function(){q(!0),M.current=n,T(n).then((function(e){n===M.current&&(q(!1),E(e),e?(_(!0),B(n).then((function(e){_(!1),O(e.ask)})).catch((function(e){_(!1)}))):O(null),q(!1))})).catch((function(e){q(!1)}))}),[n]),Object(a.useEffect)((function(){if(null!=P&&null!=x){var e=i*x;S(e),k(e>0?e+15:e)}else S(0),k(0)}),[P,x,i]);var $=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(F<y)){e.next=3;break}return window.alert("You don't have enough cash for  that purchase "),e.abrupt("return");case 3:P?(t="Please confirm purchase of "+i+" shares of "+P+" for a total of "+te(y)+".",window.confirm(t)&&U(n,i,x||0).then((function(e){var t=e.successful,n=e.remainingCash;t&&(window.alert("Purchase successful. New cash balance is "+te(n)),window.location.assign("/transactions"))}),(function(){window.alert("Purchase was not executed due to critical server error")}))):window.alert("Purchase cancelled");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(z.jsxs)(u.a,Object(xe.a)(Object(xe.a)({name:"buy"},{labelCol:{span:2,offset:0},wrapperCol:{span:6,offset:1}}),{},{children:[Object(z.jsxs)(u.a.Item,{label:"Stock",children:[Object(z.jsx)(l.a,{value:n,placeholder:"Enter stock ticker symbol",onChange:function(e){r(e.target.value.toUpperCase())}}),Object(z.jsxs)(z.Fragment,{children:[G?Object(z.jsx)(b.a,{size:"small"}):Object(z.jsx)("label",{style:n&&P?{color:void 0}:{color:"red"},children:n?P||"Invalid ticker symbol":""})," "]})]}),Object(z.jsx)(u.a.Item,{label:"Current Ask Price",children:K||G?Object(z.jsx)(b.a,{size:"small"}):Object(z.jsx)("label",{children:x?te(x):"Please enter a valid ticker symbol"})}),Object(z.jsx)(u.a.Item,{label:"Shares to Buy",children:Object(z.jsx)(l.a,{placeholder:"Enter number of shares to buy",onChange:function(e){var t=e.target.value,n=Number.parseInt(t);d(n||0)},value:0===i?void 0:i})}),Object(z.jsx)(u.a.Item,{label:"Commission",children:Object(z.jsx)("label",{children:te(15)})}),Object(z.jsx)(u.a.Item,{label:"Total Cost",children:i>0&&(G||K)?Object(z.jsx)(b.a,{size:"small"}):Object(z.jsx)("label",{style:y>F?{color:"red"}:{color:void 0},children:i>0?te(y):"Please enter the number of shares to buy"})}),Object(z.jsx)(u.a.Item,Object(xe.a)(Object(xe.a)({},{wrapperCol:{offset:3,span:16}}),{},{children:Object(z.jsx)(j.a,{type:"primary",onClick:$,disabled:0===i||K||G||!P||y>F,children:"Submit"})}))]}))}function Se(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),c=Object(o.a)(s,2),i=c[0],d=c[1],h=Object(a.useState)(void 0),m=Object(o.a)(h,2),x=m[0],O=m[1],v=Object(a.useState)(0),g=Object(o.a)(v,2),y=g[0],k=g[1],w=Object(a.useState)({bid:0,ask:0,previousClose:0}),I=Object(o.a)(w,2),S=I[0],C=I[1],P=Object(a.useState)(!1),D=Object(o.a)(P,2),T=D[0],E=D[1],L=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y>F(x))){e.next=3;break}return window.alert("Insufficient shares for this sale"),e.abrupt("return");case 3:if(!x){e.next=15;break}if(t=S.bid*y-15,n="Please confirm sale of "+y+" shares of "+x.stock.name+" for a total of "+te(t)+".",!window.confirm(n)){e.next=14;break}return e.next=10,N(x.stock.symbol,y,S.bid||0);case 10:(a=e.sent)?(window.alert("Sale confirmed. New cash balance is "+te(a.remainingCash)),window.location.assign("/")):window.alert("Sale failed: "+a),e.next=15;break;case 14:alert("Sale cancelled");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){d(!0),A().then((function(e){r(e),d(!1),e&&e.length>0&&O(e[0])}))}),[]),Object(a.useEffect)((function(){x&&(E(!0),k(0),B(x.stock.symbol).then((function(e){C(e),E(!1)})))}),[x]);return Object(z.jsx)(z.Fragment,{children:i?Object(z.jsx)(b.a,{size:"large"}):n&&0!=n.length?Object(z.jsxs)(u.a,Object(xe.a)(Object(xe.a)({name:"sell"},{labelCol:{span:2,offset:0},wrapperCol:{span:6,offset:1}}),{},{children:[Object(z.jsx)(u.a.Item,{label:"Stock",children:Object(z.jsx)(ke.a,{onChange:function(e){if(n&&e){var t=n.find((function(t){return t.stock.symbol.toUpperCase()===e.toUpperCase()}));t&&(O(t),k(0))}},defaultValue:n[0].stock.symbol,value:null===x||void 0===x?void 0:x.stock.symbol,children:n.map((function(e){return Object(z.jsx)(ke.a.Option,{value:e.stock.symbol,children:e.stock.name+"  ("+e.stock.symbol+")"})}))})}),Object(z.jsx)(u.a.Item,{label:"Current Bid Price",children:T?Object(z.jsx)(b.a,{size:"small"}):Object(z.jsxs)("label",{children:[" ",te(S.bid)]})}),Object(z.jsx)(u.a.Item,{label:"Shares to Sell",children:Object(z.jsx)(l.a,{placeholder:x?F(x)+" shares of "+x.stock.symbol+" available to sell":"Enter number of shares to sell",onChange:function(e){var t=e.target.value,n=Number.parseInt(t);k(n||0)},value:0==y?void 0:y,style:y>F(x)?{color:"red"}:{color:void 0}})}),Object(z.jsx)(u.a.Item,{label:"Commission",children:Object(z.jsx)("label",{children:te(15)})}),Object(z.jsx)(u.a.Item,{label:"Net Proceeds",children:T&&y>0?Object(z.jsx)(b.a,{size:"small"}):Object(z.jsx)("label",{children:y>F(x)?"You may sell a maximum of "+F(x)+" shares of "+(null===x||void 0===x?void 0:x.stock.symbol):0==y?"Please enter the number of shares to sell":y>0?te(S.bid*y-15):0})}),Object(z.jsx)(u.a.Item,Object(xe.a)(Object(xe.a)({},{wrapperCol:{offset:3,span:16}}),{},{children:Object(z.jsx)(j.a,{type:"primary",onClick:L,disabled:!x||!S||y<=0||y>F(x),children:"Submit"})}))]})):Object(z.jsx)(de.a,{description:"You do not have any stocks to sell"})})}!function(e){e.BUY="BUY",e.SELL="SELL"}(ge||(ge={}));var Ce=function(){var e=Object(a.useState)(ge.BUY),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("br",{}),Object(z.jsx)(u.a,Object(xe.a)(Object(xe.a)({name:"trade"},{labelCol:{span:2,offset:0},wrapperCol:{span:2}}),{},{children:Object(z.jsx)(u.a.Item,{label:"Trade Type",labelAlign:"left",children:Object(z.jsxs)(ke.a,{onChange:function(e){r(e)},defaultValue:ge.BUY,children:[Object(z.jsx)(ke.a.Option,{value:ge.BUY,children:ge.BUY}),Object(z.jsx)(ke.a.Option,{value:ge.SELL,children:ge.SELL})]})})})),Object(z.jsx)(we.a,{orientation:"left",orientationMargin:"0",children:n==ge.BUY?"Buy Stock":"Sell Stock"}),n==ge.BUY?Object(z.jsx)(Ie,{}):Object(z.jsx)(Se,{})]})};var Ae=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){P().then((function(e){r(s(e))}))}),[]);var s=function(e){var t,n=[],a=Object(q.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({date:ae(r.date,!0),description:c(r),amount:r.amount?te(r.amount):te(0),cash:te(r.cash)})}}catch(s){a.e(s)}finally{a.f()}return n},c=function(e){var t="";switch(e.type){case V.BUY:t="Buy "+e.shares+" of "+e.name+" ("+e.symbol+") at "+te(je(e));break;case V.DIVIDEND:t="Dividend on "+e.shares+" shares of "+e.name+" ("+e.symbol+")";break;case V.GIFT:t="Initial Deposit";break;case V.SELL:t="Sell "+e.shares+" of "+e.name+" ("+e.symbol+") at "+te(je(e));break;case V.SPLIT:t=e.symbol+" "+e.to+"-for-"+e.from+" Stock Split";break;default:console.log("This is transaction type: "+e.type),t="There is no describing this transaction"}return t};return Object(z.jsxs)("div",{className:"Transactions",children:[Object(z.jsx)("header",{className:"Transactions-header"}),void 0===n?Object(z.jsx)(b.a,{size:"default"}):Object(z.jsx)(ve.a,{dataSource:n,columns:[{title:"Date",dataIndex:"date",key:"date"},{title:"Description",dataIndex:"description",key:"description"},{title:"Amount",dataIndex:"amount",key:"amount"},{title:"Cash Balance",dataIndex:"cash",key:"cash"}],pagination:{pageSize:100}})]})},Pe=G.a.TabPane,De=Object(z.jsx)(j.a,{type:"primary",onClick:function(){window.confirm("OK to Log Out?")&&(sessionStorage.removeItem(h),sessionStorage.removeItem(x),sessionStorage.removeItem(m),window.location.assign("/login"))},children:"Logout"});var Te=function(){return Object(z.jsxs)(G.a,{style:{paddingTop:"5px",paddingLeft:"10px",paddingRight:"5px",boxSizing:"content-box"},tabBarExtraContent:De,tabPosition:"top",type:"card",children:[Object(z.jsx)(Pe,{tab:"Overview",children:Object(z.jsx)(Oe,{})},"1"),Object(z.jsx)(Pe,{tab:"Positions",children:Object(z.jsx)(ye,{})},"2"),Object(z.jsx)(Pe,{tab:"Transactions",children:Object(z.jsx)(Ae,{})},"3"),Object(z.jsx)(Pe,{tab:"Analysis",children:Object(z.jsx)(me,{})},"4"),Object(z.jsx)(Pe,{tab:"Trade",children:Object(z.jsx)(Ce,{})},"5")]})},Ee=n(187),Le=n(42);var Ue=function(){return Object(z.jsxs)(u.a,Object(xe.a)(Object(xe.a)({name:"signup"},{labelCol:{span:2,offset:0},wrapperCol:{span:10,offset:1}}),{},{onFinish:function(e){w(e.userID,e.password,e.name).then((function(t){t.success?(window.location.assign("/login"),window.alert("Welcome, "+e.name+". Your account was successfully created.")):window.alert("Error creating account : "+t.message)}))},children:[Object(z.jsx)(u.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name"}],children:Object(z.jsx)(l.a,{placeholder:"Fred Smith"})}),Object(z.jsx)(u.a.Item,{label:"User ID",name:"userID",rules:[{required:!0,message:"Please input your user ID"}],children:Object(z.jsx)(l.a,{placeholder:"stock-market-whiz"})}),Object(z.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password"}],children:Object(z.jsx)(l.a.Password,{autoComplete:"new-password"})}),Object(z.jsx)(u.a.Item,{wrapperCol:{offset:8,span:3},children:Object(z.jsx)(j.a,{type:"primary",htmlType:"submit",children:"Sign Up"})})]}))},Ne=n(180);function Be(){return Object(z.jsx)("div",{children:Object(z.jsx)(Ee.a,{children:Object(z.jsxs)("div",{children:[Object(z.jsx)(Ne.a,{children:Object(z.jsx)("title",{children:(k()?sessionStorage.getItem(m)+" - ":"")+"Investment Simulator"})}),Object(z.jsx)(R,{}),Object(z.jsx)("br",{}),Object(z.jsxs)(Le.c,{children:[Object(z.jsx)(Le.a,{path:"/signup",children:Object(z.jsx)(Ue,{})}),Object(z.jsx)(Le.a,{path:"/login",children:k()?Object(z.jsx)(Te,{}):Object(z.jsx)(Y,{})}),Object(z.jsx)(Le.a,{path:"/",children:k()?Object(z.jsx)(Te,{}):Object(z.jsx)(Y,{})})]})]})})})}var Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,283)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(Be,{})}),document.getElementById("root")),Fe()}},[[276,1,2]]]);
//# sourceMappingURL=main.f5fd3c38.chunk.js.map