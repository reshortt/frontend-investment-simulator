(this["webpackJsonpinvestment-simulator"]=this["webpackJsonpinvestment-simulator"]||[]).push([[0],{199:function(e,t,n){},278:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(54),c=n.n(s),o=(n(199),n(27)),i=n(190),u=n(284),l=n(187),b=n(180),j=n(76),d=n(18),p=n.n(d),f=n(39),h="AUTH_TOKEN_KEY",m=n(55),x=n.n(m),O=new(n(200).MD5),v=function(e){return O.hex(e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET";return{method:e,headers:{authorization:"Bearer ".concat(sessionStorage.getItem(h))}}},y=function(){return!!sessionStorage.getItem(h)},w=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){var r,s,c,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v(n),console.log("signing up with clear password = ",n,", encrypted =",r),s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r,name:a})},e.next=5,x()("/API/signup",s);case 5:return c=e.sent,o=c.status,e.next=9,c.json();case 9:if(i=e.sent,200!==o){e.next=14;break}return e.abrupt("return",!0);case 14:return console.log("Signup failed: "+JSON.stringify(i)),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a,r,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v(n),console.log("logging in with clear password = ",n,", encrypted =",a),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})},e.next=5,x()("/API/login",r);case 5:s=e.sent,e.t0=s.status,e.next=200===e.t0?9:401===e.t0||400===e.t0?15:17;break;case 9:return e.next=11,s.json();case 11:return c=e.sent,sessionStorage.setItem(h,c.token),console.log("Successful login: "+c),e.abrupt("return",!0);case 15:return console.log("unsuccessful login for user "+t),e.abrupt("return",!1);case 17:return console.log("unexpected login response"),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,x()("/API/getAccount",t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",null);case 17:return console.log("unexpected getAccount response"),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,x()("/API/getUserInfo",t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",null);case 17:return console.log("unexpected getUser response"),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,x()("/API/getAssets",t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?12:18;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,console.log("Assets retrieved: "+a.assets),e.abrupt("return",a.assets);case 12:return e.t1=console,e.next=15,n.json();case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 18:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,x()("/API/getTransactions",t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?11:17;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,e.abrupt("return",a.transactions);case 11:return e.t1=console,e.next=14,n.json();case 14:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 17:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,x()("/API/getCash",t);case 3:n=e.sent,e.t0=n.status,e.next=200===e.t0?7:401===e.t0?12:18;break;case 7:return e.next=9,n.json();case 9:return a=e.sent,console.log("Transactions retrieved: "+a.cash),e.abrupt("return",a.cash);case 12:return e.t1=console,e.next=15,n.json();case 15:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",a);case 18:return console.log("unexpected getAssets response"),e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Looking up ticker: "+t+"......."),n=g(),a=new URL("/API/lookupTicker"),r=new URLSearchParams({tickerSymbol:t}),a.search=r.toString(),e.next=7,x()(a,n);case 7:s=e.sent,console.log("ticker lookup: ",s.status," - ",s.json),e.t0=s.status,e.next=200===e.t0?12:400===e.t0?16:17;break;case 12:return e.next=14,s.text();case 14:return c=e.sent,e.abrupt("return",c);case 16:return e.abrupt("return",null);case 17:return console.log("unexpected lookupTicker response"),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function T(e,t){return L.apply(this,arguments)}function L(){return(L=Object(f.a)(p.a.mark((function e(t,n){var a,r,s,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(),r=new URLSearchParams({ticker:t,date:n.toDateString()}),(s=new URL("/API/getHistoricalPrices")).search=r.toString(),e.next=6,x()(s,a);case 6:c=e.sent,e.t0=c.status,e.next=200===e.t0?10:14;break;case 10:return e.next=12,c.json();case 12:return o=e.sent,e.abrupt("return",o);case 14:return console.log("unexpected buyAsset response"),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){var r,s,c,o,i,u,l,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g(),s=n.toString(),c=a.toString(),o=new URL("/API/buyAsset"),i=new URLSearchParams({tickerSymbol:t,shares:s,price:c}),o.search=i.toString(),e.next=8,x()(o,r);case 8:u=e.sent,e.t0=u.status,e.next=200===e.t0?12:17;break;case 12:return e.next=14,u.json();case 14:return l=e.sent,b=l.cash,e.abrupt("return",{successful:!0,remainingCash:b});case 17:return console.log("unexpected buyAsset response"),e.abrupt("return",{successful:!1,remainingCash:0});case 19:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){var r,s,c,o,i,u,l,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g(),s=n.toString(),c=a.toString(),o=new URL("/API/sellAsset"),i=new URLSearchParams({tickerSymbol:t,shares:s,price:c}),o.search=i.toString(),e.next=8,x()(o,r);case 8:u=e.sent,console.log("response: ",u.status),e.t0=u.status,e.next=200===e.t0?13:18;break;case 13:return e.next=15,u.json();case 15:return l=e.sent,b=l.cash,e.abrupt("return",{successful:!0,remainingCash:b});case 18:return console.log("unexpected getAssets response"),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(),a=new URL("/API/getStockPrice"),r=new URLSearchParams({tickerSymbol:t}),a.search=r.toString(),e.next=6,x()(a,n);case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,console.log("Get Stock Price Response:: ",c),e.t0=s.status,e.next=200===e.t0?14:401===e.t0?15:21;break;case 14:return e.abrupt("return",c);case 15:return e.t1=console,e.next=18,s.json();case 18:return e.t2=e.sent,e.t1.log.call(e.t1,e.t2),e.abrupt("return",c);case 21:return console.log("unexpected getAssets response"),e.abrupt("return",c);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t;console.log("get Share count for ",null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.symbol," with ",null===e||void 0===e?void 0:e.lots);var n=0;return e?(e.lots.map((function(e){n+=e.shares})),console.log(" ---\x3e share count = ",n),n):0},F=(n(151),n(5));var z=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(F.jsxs)(u.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(e){r(!0),k(e.username,e.password).then((function(e){r(!1),e?I().then((function(e){i.b.success("User "+(null===e||void 0===e?void 0:e.name)+" successfully logged in",1).then((function(){window.location.assign("/")}))})):i.b.error("Invalid credentials")}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(F.jsx)(u.a.Item,{label:"User name",name:"username",rules:[{required:!0,message:"Please input your username"}],children:Object(F.jsx)(l.a,{})}),Object(F.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(F.jsx)(l.a.Password,{})}),Object(F.jsx)(u.a.Item,{wrapperCol:{offset:8,span:16},children:n||y()?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)(j.a,{type:"primary",htmlType:"submit",children:"Login"})}),Object(F.jsxs)(u.a.Item,{wrapperCol:{offset:8,span:16},children:[Object(F.jsx)("label",{children:"No Account? "}),Object(F.jsx)(j.a,{type:"link",onClick:function(){window.location.assign("/signup")},children:"Sign Up"})]})]})},R=n(181);function Y(){var e=R.a.div.withConfig({displayName:"Header__Container",componentId:"sc-dpcfn6-0"})(["width:100%;height:70px;background-color:green;"]),t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],s=n[1];return Object(a.useEffect)((function(){y()&&!r&&(console.log("Getting User Info . Currently it is ",r),I().then((function(e){e&&s(e)})))})),Object(F.jsx)(e,{children:Object(F.jsxs)("label",{style:{color:"white",font:"Arial",textAlign:"center",verticalAlign:"center",paddingTop:"10"},children:[" ",Object(F.jsx)("br",{}),r?" Investment Simulator - "+r.name:" Investment Simulator"," "]})})}var M,V=n(282),G=n(17),H=n(57),q=n(193),J=n(283);!function(e){e.GIFT="GIFT",e.BUY="BUY",e.SELL="SELL",e.DIVIDEND="DIVIDEND",e.SPLIT="SPLIT"}(M||(M={}));var K=function(e){var t,n=0,a=Object(G.a)(e.lots);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=r.basis*r.shares}}catch(s){a.e(s)}finally{a.f()}return n},_=function(e){var t,n=0,a=Object(G.a)(e.lots);try{for(a.s();!(t=a.n()).done;){n+=t.value.shares}}catch(r){a.e(r)}finally{a.f()}return n},Q=function(e){return _(e)*(e.stock.price.bid||e.stock.price.previousClose||0)},W=function(e){return $(e)-1e6},$=function(e){var t,n=0,a=Object(G.a)(e.assets);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=Q(r)}}catch(s){a.e(s)}finally{a.f()}return n+e.info.cash},X=function(e,t){return Q(t)/$(e)},Z=function(e){return Q(e)-K(e)},ee=function(e){return"$"+new Intl.NumberFormat("en-us",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},te=function(e){return new Intl.NumberFormat("en-us",{minimumFractionDigits:2,maximumFractionDigits:2}).format(100*e)+"%"},ne=function(e,t){var n=new Date(e);if(!Object(q.a)(n))return"";var a=t?"MMMM dd, yyyy":"yyyy-MM-dd";return Object(J.a)(n,a)};function ae(e,t){var n=[];t.setHours(0,0,0,0);var a,r=Object(G.a)(e);try{for(r.s();!(a=r.n()).done;){var s=a.value,c=new Date(s.date);if(c.setHours(0,0,0,0),c>t)break;c.getTime()===t.getTime()&&n.push(s)}}catch(o){r.e(o)}finally{r.f()}return n}function re(e,t){var n,a=e.shares,r=Object(G.a)(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;s.type==M.SPLIT&&s.symbol.toUpperCase()==e.symbol.toUpperCase()&&s.date>e.date&&(a*=s.to/s.from)}}catch(c){r.e(c)}finally{r.f()}return a}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(f.a)(p.a.mark((function e(t){var n,a,r,s,c,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new Map,a=[],r=0,s=new Date(t[0].date),(c=new Date(Date.now())).setDate(c.getDate()-2),o=function(e){var s,c=ae(t,e),o=Object(G.a)(c);try{for(o.s();!(s=o.n()).done;){var i=s.value;switch(i.type){case M.BUY:var u=n.get(i.symbol),l=re(i,t);void 0!==u?u+=l:u=l,n.set(i.symbol,u),r-=i.amount;break;case M.DIVIDEND:r+=i.amount;break;case M.SELL:var b=n.get(i.symbol),j=re(i,t);void 0!==b?b-=j:(console.log("******** Error - sold shares that were not owned"),b=0),n.set(i.symbol,b),r+=i.amount;break;case M.GIFT:r+=i.amount}}}catch(p){o.e(p)}finally{o.f()}var d=[];n.forEach((function(e,t){void 0!==e&&e>0&&d.push({shares:e,symbol:t})})),a.push({cash:r,date:new Date(e),positions:d})},i=s;i<c;i.setDate(i.getDate()+1))o(i);return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=new Map,ie=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=oe.get(t))){e.next=3;break}return e.abrupt("return",a);case 3:return e.next=5,T(t,n);case 5:return a=e.sent,oe.set(t,a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a,r,s,c,o,i,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t,n);case 2:if(a=e.sent,r=a.length>2?Math.abs(new Date(a[0].date).getTime()-new Date(n).getTime()):void 0,s=a.length>2?Math.abs(new Date(a[a.length-1].date).getTime()-new Date(n).getTime()):void 0,!(r&&s&&r>s)){e.next=17;break}c=a.length-1;case 7:if(!(c>=0)){e.next=15;break}if(o=a[c],!(new Date(o.date)<=n)){e.next=12;break}return e.abrupt("return",o.price);case 12:--c,e.next=7;break;case 15:e.next=35;break;case 17:i=Object(G.a)(a),e.prev=18,i.s();case 20:if((u=i.n()).done){e.next=27;break}if(l=u.value,!(new Date(l.date)>=n)){e.next=25;break}return e.abrupt("return",l.price);case 25:e.next=20;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(18),i.e(e.t0);case 32:return e.prev=32,i.f(),e.finish(32);case 35:return console.log(t,"price on ",n,": ",0),e.abrupt("return",0);case 37:case"end":return e.stop()}}),e,null,[[18,29,32,35]])})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,s,c,o,i,u,l,b,j,d,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,se(t);case 3:a=e.sent,r=Object(G.a)(a),e.prev=5,r.s();case 7:if((s=r.n()).done){e.next=37;break}c=s.value,o=0,i=new Date(c.date),u=[],l=Object(G.a)(c.positions),e.prev=13,l.s();case 15:if((b=l.n()).done){e.next=25;break}return j=b.value,e.next=19,ue(j.symbol,i);case 19:d=e.sent,f={symbol:j.symbol,value:j.shares*d},u.push(f),o+=f.value;case 23:e.next=15;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(13),l.e(e.t0);case 30:return e.prev=30,l.f(),e.finish(30);case 33:o+=c.cash,n.push({date:i,cash:c.cash,total:o,stocks:u});case 35:e.next=7;break;case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(5),r.e(e.t1);case 42:return e.prev=42,r.f(),e.finish(42);case 45:return oe.clear(),e.abrupt("return",n);case 47:case"end":return e.stop()}}),e,null,[[5,39,42,45],[13,27,30,33]])})));return function(t){return e.apply(this,arguments)}}(),be=function(e){return e.type==M.BUY?(e.amount-e.commission)/e.shares:(e.amount+e.commission)/e.shares},je=n(77),de=n(191),pe=n(58);pe.c.register.apply(pe.c,Object(H.a)(pe.j));var fe=["cadetblue","darkorchid","cornflowerblue","indigo","olive","darkseagreen","darkmagenta"];var he=function(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){P().then((function(e){le(e).then((function(e){var t=s(e);r(t)}))}))}),[]);var s=function(e){var t=[],n=[],a=[],r=[];e=function(e){if(e.length<100)return e;for(var t=[],n=e.length/100,a=0;a<e.length;a+=n){var r=Math.floor(a);t.push(e[r])}return t[t.length-1]!=e[e.length-1]&&t.push(e[e.length-1]),t}(e);var s,c=new Map,o=Object(G.a)(e);try{for(o.s();!(s=o.n()).done;){var i,u=s.value,l=Object(G.a)(u.stocks);try{for(l.s();!(i=l.n()).done;){var b=i.value;c.get(b.symbol)||c.set(b.symbol,[])}}catch(m){l.e(m)}finally{l.f()}}}catch(m){o.e(m)}finally{o.f()}var j,d=Object(G.a)(e);try{var p=function(){var e=j.value;t.push(ne(e.date,!1)),a.push(e.total),r.push(e.cash),c.forEach((function(t,n){var a,r=NaN,s=Object(G.a)(e.stocks);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(c.symbol.toUpperCase()===n.toUpperCase()){r=c.value;break}}}catch(m){s.e(m)}finally{s.f()}t.push(r)}))};for(d.s();!(j=d.n()).done;)p()}catch(m){d.e(m)}finally{d.f()}n.push({id:1,label:"Total",data:a,pointRadius:3,pointHoverRadius:6,borderColor:"blue"}),n.push({id:2,label:"Cash",data:r,pointRadius:3,pointHoverRadius:6,borderColor:"green"});var f=3,h=0;return c.forEach((function(e,t){var a=fe[h];++h==fe.length&&(h=0),n.push({id:f++,label:t,data:e,pointRadius:3,pointHoverRadius:6,borderColor:a})})),{labels:t,datasets:n}};return Object(F.jsx)("div",{className:"Analysis",children:Object(F.jsx)("header",{className:"Analysis-header",children:void 0===n?Object(F.jsx)("div",{children:Object(F.jsx)(b.a,{size:"default"})}):n.labels.length<7?Object(F.jsx)(je.a,{description:"History unavailable for accounts created within the last week"}):Object(F.jsx)(de.a,{datasetIdKey:"1",data:n})})})},me=n(34);var xe=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(),c=Object(o.a)(s,2),i=c[0],l=c[1],j=Object(a.useState)(!1),d=Object(o.a)(j,2),p=d[0],f=d[1],h=Object(a.useState)(!1),m=Object(o.a)(h,2),x=m[0],O=m[1];return Object(a.useEffect)((function(){O(!0),I().then((function(e){e&&l(e),O(!1),f(!0),S().then((function(e){e&&r(e),f(!1)}))}))}),[]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("br",{}),Object(F.jsxs)(u.a,Object(me.a)(Object(me.a)({name:"overview"},{labelCol:{span:2,offset:0},wrapperCol:{span:36,offset:1}}),{},{children:[Object(F.jsx)(u.a.Item,{label:"Name",labelAlign:"right",children:x||!i?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{children:i.name})}),Object(F.jsx)(u.a.Item,{label:"User ID",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:i&&!x&&i.email?i.email:Object(F.jsx)(b.a,{size:"small"})})}),Object(F.jsx)(u.a.Item,{label:"Account Created",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:i&&!x?ne(i.created,!0):Object(F.jsx)(b.a,{size:"small"})})}),Object(F.jsx)(u.a.Item,{label:"Account Value",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:!n||p?Object(F.jsx)(b.a,{size:"small"}):function(e){return ee($(e))}(n)})}),Object(F.jsx)(u.a.Item,{label:"Cash Balance",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:i&&!x?ee(i.cash):Object(F.jsx)(b.a,{size:"small"})})}),Object(F.jsx)(u.a.Item,{label:"Total Gain/Loss",labelAlign:"right",children:Object(F.jsx)("span",{className:"ant-form-text",children:p||!n?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{style:W(n)<0?{color:"red"}:{color:void 0},children:function(e){return ee(W(e))}(n)})})})]}))]})},Oe=n(281);var ve,ge=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){S().then((function(e){e&&r(s(e))}))}),[]);var s=function(e){var t,n=[],a=Object(G.a)(e.assets);try{for(a.s();!(t=a.n()).done;){var r=t.value;Z(r),K(r),n.push({name:r.stock.name,symbol:r.stock.symbol,bid:ee(r.stock.price.bid||r.stock.price.previousClose),ask:ee(r.stock.price.ask||r.stock.price.previousClose),quantity:_(r).toString(),costBasis:ee(K(r)),currentValue:ee(Q(r)),percentOfAccount:te(X(e,r)),gain:ee(Z(r))})}}catch(s){a.e(s)}finally{a.f()}return n.push({name:"Cash",currentValue:ee(e.info.cash),costBasis:ee(e.info.cash),percentOfAccount:te(e.info.cash/$(e))}),n};return Object(F.jsx)("div",{className:"Positions",children:Object(F.jsx)("header",{className:"Overview-header",children:void 0===n?Object(F.jsx)("div",{children:Object(F.jsx)(b.a,{size:"default"})}):Object(F.jsx)(Oe.a,{dataSource:n,columns:[{title:"Symbol",dataIndex:"symbol",key:"symbol"},{title:"Asset",dataIndex:"name",key:"name"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Bid",dataIndex:"bid",key:"bid"},{title:"Ask",dataIndex:"ask",key:"ask"},{title:"Current Value",dataIndex:"currentValue",key:"currentValue"},{title:"Cost Basis",dataIndex:"costBasis",key:"costBasis"},{title:"Percentage of Account",dataIndex:"percentOfAccount",key:"percentOfAccount"},{title:"Total Gain/Loss",dataIndex:"gain",key:"gain"}],pagination:{pageSize:100}})})})},ye=n(114),we=n(280);function ke(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),c=Object(o.a)(s,2),i=c[0],d=c[1],h=Object(a.useState)(0),m=Object(o.a)(h,2),x=m[0],O=m[1],v=Object(a.useState)(0),g=Object(o.a)(v,2),y=g[0],w=g[1],k=Object(a.useState)(0),S=Object(o.a)(k,2),I=(S[0],S[1]),C=Object(a.useState)(null),P=Object(o.a)(C,2),T=P[0],L=P[1],E=Object(a.useState)(0),B=Object(o.a)(E,2),z=B[0],R=B[1],Y=Object(a.useRef)(""),M=Object(a.useState)(!1),V=Object(o.a)(M,2),G=V[0],H=V[1],q=Object(a.useState)(!1),J=Object(o.a)(q,2),K=J[0],_=J[1];Object(a.useEffect)((function(){A().then((function(e){R(e)}))}),[]),Object(a.useEffect)((function(){H(!0),Y.current=n,D(n).then((function(e){n===Y.current&&(H(!1),L(e),e?(_(!0),N(n).then((function(e){_(!1),O(e.ask)})).catch((function(e){_(!1)}))):O(null),H(!1))})).catch((function(e){H(!1)}))}),[n]),Object(a.useEffect)((function(){if(null!=T&&null!=x){var e=i*x;I(e),w(e>0?e+15:e)}else I(0),w(0)}),[T,x,i]);var Q=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(z<y)){e.next=3;break}return window.alert("You don't have enough cash for  that purchase "),e.abrupt("return");case 3:T?(t="Please confirm purchase of "+i+" shares of "+T+" for a total of "+ee(y)+".",window.confirm(t)&&U(n,i,x||0).then((function(e){var t=e.successful,n=e.remainingCash;t&&(window.alert("Purchase successful. New cash balance is "+ee(n)),window.location.assign("/transactions"))}),(function(){window.alert("Purchase was not executed due to critical server error")}))):window.alert("Purchase cancelled");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(F.jsxs)(u.a,Object(me.a)(Object(me.a)({name:"buy"},{labelCol:{span:2,offset:0},wrapperCol:{span:6,offset:1}}),{},{children:[Object(F.jsxs)(u.a.Item,{label:"Stock",children:[Object(F.jsx)(l.a,{placeholder:"Enter stock ticker symbol",onChange:function(e){r(e.target.value)}}),Object(F.jsxs)(F.Fragment,{children:[G?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{style:n&&T?{color:void 0}:{color:"red"},children:n?T||"Invalid ticker symbol":""})," "]})]}),Object(F.jsx)(u.a.Item,{label:"Current Ask Price",children:K||G?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{children:x?ee(x):"Please enter a valid ticker symbol"})}),Object(F.jsx)(u.a.Item,{label:"Shares to Buy",children:Object(F.jsx)(l.a,{placeholder:"Enter number of shares to buy",onChange:function(e){var t=e.target.value,n=Number.parseInt(t);d(n||0)},value:0==i?void 0:i})}),Object(F.jsx)(u.a.Item,{label:"Commission",children:Object(F.jsx)("label",{children:ee(15)})}),Object(F.jsx)(u.a.Item,{label:"Total Cost",children:i>0&&(G||K)?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{style:y>z?{color:"red"}:{color:void 0},children:i>0?ee(y):"Please enter the number of shares to buy"})}),Object(F.jsx)(u.a.Item,Object(me.a)(Object(me.a)({},{wrapperCol:{offset:3,span:16}}),{},{children:Object(F.jsx)(j.a,{type:"primary",onClick:Q,disabled:0==i||K||G||!T||y>z,children:"Submit"})}))]}))}function Se(){var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),c=Object(o.a)(s,2),i=c[0],d=c[1],h=Object(a.useState)(void 0),m=Object(o.a)(h,2),x=m[0],O=m[1],v=Object(a.useState)(0),g=Object(o.a)(v,2),y=g[0],w=g[1],k=Object(a.useState)({bid:0,ask:0,previousClose:0}),S=Object(o.a)(k,2),I=S[0],P=S[1],A=Object(a.useState)(!1),D=Object(o.a)(A,2),T=D[0],L=D[1],U=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y>B(x))){e.next=3;break}return window.alert("Insufficient shares for this sale"),e.abrupt("return");case 3:if(!x){e.next=15;break}if(t=I.bid*y-15,n="Please confirm sale of "+y+" shares of "+x.stock.name+" for a total of "+ee(t)+".",!window.confirm(n)){e.next=14;break}return e.next=10,E(x.stock.symbol,y,I.bid||0);case 10:(a=e.sent)?(window.alert("Sale confirmed. New cash balance is "+ee(a.remainingCash)),window.location.assign("/")):window.alert("Sale failed: "+a),e.next=15;break;case 14:alert("Sale cancelled");case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){d(!0),C().then((function(e){r(e),d(!1),e&&e.length>0&&O(e[0])}))}),[]),Object(a.useEffect)((function(){x&&(L(!0),w(0),N(x.stock.symbol).then((function(e){P(e),L(!1)})))}),[x]);return Object(F.jsx)(F.Fragment,{children:i?Object(F.jsx)(b.a,{size:"large"}):n&&0!=n.length?Object(F.jsxs)(u.a,Object(me.a)(Object(me.a)({name:"sell"},{labelCol:{span:2,offset:0},wrapperCol:{span:6,offset:1}}),{},{children:[Object(F.jsx)(u.a.Item,{label:"Stock",children:Object(F.jsx)(ye.a,{onChange:function(e){if(n&&e){var t=n.find((function(t){return t.stock.symbol.toUpperCase()===e.toUpperCase()}));t&&(O(t),w(0))}},defaultValue:n[0].stock.symbol,value:null===x||void 0===x?void 0:x.stock.symbol,children:n.map((function(e){return Object(F.jsx)(ye.a.Option,{value:e.stock.symbol,children:e.stock.name+"  ("+e.stock.symbol+")"})}))})}),Object(F.jsx)(u.a.Item,{label:"Current Bid Price",children:T?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsxs)("label",{children:[" ",ee(I.bid)]})}),Object(F.jsx)(u.a.Item,{label:"Shares to Sell",children:Object(F.jsx)(l.a,{placeholder:x?B(x)+" shares of "+x.stock.symbol+" available to sell":"Enter number of shares to sell",onChange:function(e){var t=e.target.value,n=Number.parseInt(t);w(n||0)},value:0==y?void 0:y,style:y>B(x)?{color:"red"}:{color:void 0}})}),Object(F.jsx)(u.a.Item,{label:"Commission",children:Object(F.jsx)("label",{children:ee(15)})}),Object(F.jsx)(u.a.Item,{label:"Net Proceeds",children:T&&y>0?Object(F.jsx)(b.a,{size:"small"}):Object(F.jsx)("label",{children:y>B(x)?"You may sell a maximum of "+B(x)+" shares of "+(null===x||void 0===x?void 0:x.stock.symbol):0==y?"Please enter the number of shares to sell":y>0?ee(I.bid*y-15):0})}),Object(F.jsx)(u.a.Item,Object(me.a)(Object(me.a)({},{wrapperCol:{offset:3,span:16}}),{},{children:Object(F.jsx)(j.a,{type:"primary",onClick:U,disabled:!x||!I||y<=0||y>B(x),children:"Submit"})}))]})):Object(F.jsx)(je.a,{description:"You do not have any stocks to sell"})})}!function(e){e.BUY="BUY",e.SELL="SELL"}(ve||(ve={}));var Ie=function(){var e=Object(a.useState)(ve.BUY),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("br",{}),Object(F.jsx)(u.a,Object(me.a)(Object(me.a)({name:"trade"},{labelCol:{span:2,offset:0},wrapperCol:{span:2}}),{},{children:Object(F.jsx)(u.a.Item,{label:"Trade Type",labelAlign:"left",children:Object(F.jsxs)(ye.a,{onChange:function(e){r(e)},defaultValue:ve.BUY,children:[Object(F.jsx)(ye.a.Option,{value:ve.BUY,children:ve.BUY}),Object(F.jsx)(ye.a.Option,{value:ve.SELL,children:ve.SELL})]})})})),Object(F.jsx)(we.a,{orientation:"left",orientationMargin:"0",children:n==ve.BUY?"Buy Stock":"Sell Stock"}),n==ve.BUY?Object(F.jsx)(ke,{}):Object(F.jsx)(Se,{})]})};var Ce=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){P().then((function(e){r(s(e))}))}),[]);var s=function(e){var t,n=[],a=Object(G.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({date:ne(r.date,!0),description:c(r),amount:r.amount?ee(r.amount):ee(0),cash:ee(r.cash)})}}catch(s){a.e(s)}finally{a.f()}return n},c=function(e){var t="";switch(e.type){case M.BUY:t="Buy "+e.shares+" of "+e.name+" ("+e.symbol+") at "+ee(be(e));break;case M.DIVIDEND:t="Dividend on "+e.shares+" shares of "+e.name+" ("+e.symbol+")";break;case M.GIFT:t="Initial Deposit";break;case M.SELL:t="Sell "+e.shares+" of "+e.name+" ("+e.symbol+") at "+ee(be(e));break;case M.SPLIT:t=e.symbol+" "+e.to+"-for-"+e.from+" Stock Split";break;default:console.log("This is transaction type: "+e.type),t="There is no describing this transaction"}return t};return Object(F.jsxs)("div",{className:"Transactions",children:[Object(F.jsx)("header",{className:"Transactions-header"}),void 0===n?Object(F.jsx)(b.a,{size:"default"}):Object(F.jsx)(Oe.a,{dataSource:n,columns:[{title:"Date",dataIndex:"date",key:"date"},{title:"Description",dataIndex:"description",key:"description"},{title:"Amount",dataIndex:"amount",key:"amount"},{title:"Cash Balance",dataIndex:"cash",key:"cash"}],pagination:{pageSize:100}})]})},Pe=V.a.TabPane,Ae=Object(F.jsx)(j.a,{type:"primary",onClick:function(){window.confirm("OK to Log Out?")&&(sessionStorage.removeItem(h),window.location.assign("/login"))},children:"Logout"});var De=function(){return Object(F.jsxs)(V.a,{style:{paddingTop:"5px",paddingLeft:"10px",paddingRight:"5px",boxSizing:"content-box"},tabBarExtraContent:Ae,tabPosition:"top",type:"card",children:[Object(F.jsx)(Pe,{tab:"Overview",children:Object(F.jsx)(xe,{})},"1"),Object(F.jsx)(Pe,{tab:"Positions",children:Object(F.jsx)(ge,{})},"2"),Object(F.jsx)(Pe,{tab:"Transactions",children:Object(F.jsx)(Ce,{})},"3"),Object(F.jsx)(Pe,{tab:"Analysis",children:Object(F.jsx)(he,{})},"4"),Object(F.jsx)(Pe,{tab:"Trade",children:Object(F.jsx)(Ie,{})},"5")]})},Te=n(189),Le=n(41);var Ue=function(){return Object(F.jsxs)(u.a,Object(me.a)(Object(me.a)({name:"signup"},{labelCol:{span:2,offset:0},wrapperCol:{span:10,offset:1}}),{},{onFinish:function(e){w(e.userID,e.password,e.name).then((function(t){t?(window.location.assign("/login"),window.alert("Welcome, "+e.name+". Your account was successfully created.")):window.alert("Error creating account")}))},children:[Object(F.jsx)(u.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please input your name"}],children:Object(F.jsx)(l.a,{placeholder:"Fred Smith"})}),Object(F.jsx)(u.a.Item,{label:"User ID",name:"userID",rules:[{required:!0,message:"Please input your user ID"}],children:Object(F.jsx)(l.a,{placeholder:"stock-market-whiz"})}),Object(F.jsx)(u.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password"}],children:Object(F.jsx)(l.a.Password,{autoComplete:"new-password"})}),Object(F.jsx)(u.a.Item,{wrapperCol:{offset:8,span:3},children:Object(F.jsx)(j.a,{type:"primary",htmlType:"submit",children:"Sign Up"})})]}))};function Ee(){return Object(F.jsx)(Te.a,{children:Object(F.jsxs)("div",{children:[Object(F.jsx)(Y,{}),Object(F.jsx)("br",{}),Object(F.jsxs)(Le.c,{children:[Object(F.jsx)(Le.a,{path:"/signup",children:Object(F.jsx)(Ue,{})}),Object(F.jsx)(Le.a,{path:"/login",children:y()?Object(F.jsx)(De,{}):Object(F.jsx)(z,{})}),Object(F.jsx)(Le.a,{path:"/",children:y()?Object(F.jsx)(De,{}):Object(F.jsx)(z,{})})]})]})})}var Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,285)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(Ee,{})}),document.getElementById("root")),Ne()}},[[278,1,2]]]);
//# sourceMappingURL=main.422de622.chunk.js.map